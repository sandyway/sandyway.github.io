{"version":3,"file":"16.CPl12rl9.js","sources":["../../../../../../src/lib/components/layout/Sidebar/UserMenu.svelte","../../../../../../src/lib/components/icons/CameraSolid.svelte","../../../../../../src/lib/components/channel/Messages/Message/ProfilePreview.svelte","../../../../../../src/lib/components/icons/ChatBubbleOvalEllipsis.svelte","../../../../../../src/lib/components/icons/FaceSmile.svelte","../../../../../../node_modules/@sveltejs/svelte-virtual-list/VirtualList.svelte","../../../../../../src/lib/components/channel/Messages/Message/ReactionPicker.svelte","../../../../../../src/lib/components/channel/Messages/Message.svelte","../../../../../../src/lib/components/channel/Messages.svelte","../../../../../../src/lib/components/channel/MessageInput/InputMenu.svelte","../../../../../../src/lib/components/channel/MessageInput.svelte","../../../../../../src/lib/components/channel/Navbar.svelte","../../../../../../src/lib/components/channel/Thread.svelte","../../../../../../src/lib/components/channel/Channel.svelte","../../../../../../src/routes/(app)/channels/[id]/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { createEventDispatcher, getContext, onMount } from 'svelte';\n\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { goto } from '$app/navigation';\n\timport ArchiveBox from '$lib/components/icons/ArchiveBox.svelte';\n\timport { showSettings, activeUserIds, USAGE_POOL, mobile, showSidebar, user } from '$lib/stores';\n\timport { fade, slide } from 'svelte/transition';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport { userSignOut } from '$lib/apis/auths';\n\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\texport let role = '';\n\texport let className = 'max-w-[240px]';\n\n\tconst dispatch = createEventDispatcher();\n</script>\n\n<DropdownMenu.Root\n\tbind:open={show}\n\tonOpenChange={(state) => {\n\t\tdispatch('change', state);\n\t}}\n>\n\t<DropdownMenu.Trigger>\n\t\t<slot />\n\t</DropdownMenu.Trigger>\n\n\t<slot name=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full {className} text-sm rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary\"\n\t\t\tsideOffset={8}\n\t\t\tside=\"bottom\"\n\t\t\talign=\"start\"\n\t\t\ttransition={(e) => fade(e, { duration: 100 })}\n\t\t>\n\t\t\t<button\n\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\ton:click={async () => {\n\t\t\t\t\tawait showSettings.set(true);\n\t\t\t\t\tshow = false;\n\n\t\t\t\t\tif ($mobile) {\n\t\t\t\t\t\tshowSidebar.set(false);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\" self-center mr-3\">\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\td=\"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\td=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Settings')}</div>\n\t\t\t</button>\n\n\t\t\t<button\n\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tdispatch('show', 'archived-chat');\n\t\t\t\t\tshow = false;\n\n\t\t\t\t\tif ($mobile) {\n\t\t\t\t\t\tshowSidebar.set(false);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\" self-center mr-3\">\n\t\t\t\t\t<ArchiveBox className=\"size-5\" strokeWidth=\"1.5\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Archived Chats')}</div>\n\t\t\t</button>\n\n\t\t\t{#if role === 'admin'}\n\t\t\t\t<a\n\t\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\t\thref=\"/playground\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshow = false;\n\n\t\t\t\t\t\tif ($mobile) {\n\t\t\t\t\t\t\tshowSidebar.set(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" self-center mr-3\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"size-5\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\td=\"M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Playground')}</div>\n\t\t\t\t</a>\n\n\t\t\t\t<a\n\t\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\t\thref=\"/admin\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshow = false;\n\n\t\t\t\t\t\tif ($mobile) {\n\t\t\t\t\t\t\tshowSidebar.set(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" self-center mr-3\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\td=\"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Admin Panel')}</div>\n\t\t\t\t</a>\n\t\t\t{/if}\n\n\t\t\t<hr class=\" border-gray-100 dark:border-gray-850 my-1 p-0\" />\n\n\t\t\t<button\n\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\ton:click={async () => {\n\t\t\t\t\tawait userSignOut();\n\t\t\t\t\tuser.set(null);\n\n\t\t\t\t\tlocalStorage.removeItem('token');\n\t\t\t\t\tlocation.href = '/auth';\n\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\" self-center mr-3\">\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M6 10a.75.75 0 01.75-.75h9.546l-1.048-.943a.75.75 0 111.004-1.114l2.5 2.25a.75.75 0 010 1.114l-2.5 2.25a.75.75 0 11-1.004-1.114l1.048-.943H6.75A.75.75 0 016 10z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Sign Out')}</div>\n\t\t\t</button>\n\n\t\t\t{#if $activeUserIds?.length > 0}\n\t\t\t\t<hr class=\" border-gray-100 dark:border-gray-850 my-1 p-0\" />\n\n\t\t\t\t<Tooltip\n\t\t\t\t\tcontent={$USAGE_POOL && $USAGE_POOL.length > 0\n\t\t\t\t\t\t? `${$i18n.t('Running')}: ${$USAGE_POOL.join(', ')} âœ¨`\n\t\t\t\t\t\t: ''}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex rounded-md py-1.5 px-3 text-xs gap-2.5 items-center\">\n\t\t\t\t\t\t<div class=\" flex items-center\">\n\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"relative inline-flex rounded-full size-2 bg-green-500\" />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\" \">\n\t\t\t\t\t\t\t<span class=\"\">\n\t\t\t\t\t\t\t\t{$i18n.t('Active Users')}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class=\" font-semibold\">\n\t\t\t\t\t\t\t\t{$activeUserIds?.length}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Tooltip>\n\t\t\t{/if}\n\n\t\t\t<!-- <DropdownMenu.Item class=\"flex items-center px-3 py-2 text-sm \">\n\t\t\t\t<div class=\"flex items-center\">Profile</div>\n\t\t\t</DropdownMenu.Item> -->\n\t\t</DropdownMenu.Content>\n\t</slot>\n</DropdownMenu.Root>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n</script>\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" class={className}>\n\t<path d=\"M12 9a3.75 3.75 0 1 0 0 7.5A3.75 3.75 0 0 0 12 9Z\" />\n\t<path\n\t\tfill-rule=\"evenodd\"\n\t\td=\"M9.344 3.071a49.52 49.52 0 0 1 5.312 0c.967.052 1.83.585 2.332 1.39l.821 1.317c.24.383.645.643 1.11.71.386.054.77.113 1.152.177 1.432.239 2.429 1.493 2.429 2.909V18a3 3 0 0 1-3 3h-15a3 3 0 0 1-3-3V9.574c0-1.416.997-2.67 2.429-2.909.382-.064.766-.123 1.151-.178a1.56 1.56 0 0 0 1.11-.71l.822-1.315a2.942 2.942 0 0 1 2.332-1.39ZM6.75 12.75a5.25 5.25 0 1 1 10.5 0 5.25 5.25 0 0 1-10.5 0Zm12-1.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z\"\n\t\tclip-rule=\"evenodd\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { createEventDispatcher } from 'svelte';\n\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\timport { activeUserIds } from '$lib/stores';\n\n\texport let side = 'right';\n\texport let align = 'top';\n\n\texport let user = null;\n\tlet show = false;\n\n\tconst dispatch = createEventDispatcher();\n</script>\n\n<DropdownMenu.Root\n\tbind:open={show}\n\tcloseFocus={false}\n\tonOpenChange={(state) => {\n\t\tdispatch('change', state);\n\t}}\n\ttypeahead={false}\n>\n\t<DropdownMenu.Trigger>\n\t\t<slot />\n\t</DropdownMenu.Trigger>\n\n\t<slot name=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"max-w-full w-[240px] rounded-lg z-9999 bg-white dark:bg-black dark:text-white shadow-lg\"\n\t\t\tsideOffset={8}\n\t\t\t{side}\n\t\t\t{align}\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t{#if user}\n\t\t\t\t<div class=\" flex flex-col gap-2 w-full rounded-lg\">\n\t\t\t\t\t<div class=\"py-8 relative bg-gray-900 rounded-t-lg\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tcrossorigin=\"anonymous\"\n\t\t\t\t\t\t\tsrc={user?.profile_image_url ?? `${WEBUI_BASE_URL}/static/favicon.png`}\n\t\t\t\t\t\t\tclass=\" absolute -bottom-5 left-3 size-12 ml-0.5 object-cover rounded-full -translate-y-[1px]\"\n\t\t\t\t\t\t\talt=\"profile\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\" flex flex-col pt-4 pb-2.5 px-4\">\n\t\t\t\t\t\t<div class=\" -mb-1\">\n\t\t\t\t\t\t\t<span class=\"font-medium text-sm line-clamp-1\"> {user.name} </span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\" flex items-center gap-2\">\n\t\t\t\t\t\t\t{#if $activeUserIds.includes(user.id)}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclass=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<span class=\"relative inline-flex rounded-full size-2 bg-green-500\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\" -translate-y-[1px]\">\n\t\t\t\t\t\t\t\t\t<span class=\"text-xs\"> Active </span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"relative inline-flex rounded-full size-2 bg-gray-500\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\" -translate-y-[1px]\">\n\t\t\t\t\t\t\t\t\t<span class=\"text-xs\"> Away </span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</DropdownMenu.Content>\n\t</slot>\n</DropdownMenu.Root>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z\"\n\t/>\n</svg>\n","<script>\n\timport { onMount, tick } from 'svelte';\n\n\t// props\n\texport let items;\n\texport let height = '100%';\n\texport let itemHeight = undefined;\n\n\tlet foo;\n\n\t// read-only, but visible to consumers via bind:start\n\texport let start = 0;\n\texport let end = 0;\n\n\t// local state\n\tlet height_map = [];\n\tlet rows;\n\tlet viewport;\n\tlet contents;\n\tlet viewport_height = 0;\n\tlet visible;\n\tlet mounted;\n\n\tlet top = 0;\n\tlet bottom = 0;\n\tlet average_height;\n\n\t$: visible = items.slice(start, end).map((data, i) => {\n\t\treturn { index: i + start, data };\n\t});\n\n\t// whenever `items` changes, invalidate the current heightmap\n\t$: if (mounted) refresh(items, viewport_height, itemHeight);\n\n\tasync function refresh(items, viewport_height, itemHeight) {\n\t\tconst { scrollTop } = viewport;\n\n\t\tawait tick(); // wait until the DOM is up to date\n\n\t\tlet content_height = top - scrollTop;\n\t\tlet i = start;\n\n\t\twhile (content_height < viewport_height && i < items.length) {\n\t\t\tlet row = rows[i - start];\n\n\t\t\tif (!row) {\n\t\t\t\tend = i + 1;\n\t\t\t\tawait tick(); // render the newly visible row\n\t\t\t\trow = rows[i - start];\n\t\t\t}\n\n\t\t\tconst row_height = height_map[i] = itemHeight || row.offsetHeight;\n\t\t\tcontent_height += row_height;\n\t\t\ti += 1;\n\t\t}\n\n\t\tend = i;\n\n\t\tconst remaining = items.length - end;\n\t\taverage_height = (top + content_height) / end;\n\n\t\tbottom = remaining * average_height;\n\t\theight_map.length = items.length;\n\n\t}\n\n\tasync function handle_scroll() {\n\t\tconst { scrollTop } = viewport;\n\n\t\tconst old_start = start;\n\n\t\tfor (let v = 0; v < rows.length; v += 1) {\n\t\t\theight_map[start + v] = itemHeight || rows[v].offsetHeight;\n\t\t}\n\n\t\tlet i = 0;\n\t\tlet y = 0;\n\n\t\twhile (i < items.length) {\n\t\t\tconst row_height = height_map[i] || average_height;\n\t\t\tif (y + row_height > scrollTop) {\n\t\t\t\tstart = i;\n\t\t\t\ttop = y;\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ty += row_height;\n\t\t\ti += 1;\n\t\t}\n\n\t\twhile (i < items.length) {\n\t\t\ty += height_map[i] || average_height;\n\t\t\ti += 1;\n\n\t\t\tif (y > scrollTop + viewport_height) break;\n\t\t}\n\n\t\tend = i;\n\n\t\tconst remaining = items.length - end;\n\t\taverage_height = y / end;\n\n\t\twhile (i < items.length) height_map[i++] = average_height;\n\t\tbottom = remaining * average_height;\n\n\t\t// prevent jumping if we scrolled up into unknown territory\n\t\tif (start < old_start) {\n\t\t\tawait tick();\n\n\t\t\tlet expected_height = 0;\n\t\t\tlet actual_height = 0;\n\n\t\t\tfor (let i = start; i < old_start; i +=1) {\n\t\t\t\tif (rows[i - start]) {\n\t\t\t\t\texpected_height += height_map[i];\n\t\t\t\t\tactual_height += itemHeight || rows[i - start].offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst d = actual_height - expected_height;\n\t\t\tviewport.scrollTo(0, scrollTop + d);\n\t\t}\n\n\t\t// TODO if we overestimated the space these\n\t\t// rows would occupy we may need to add some\n\t\t// more. maybe we can just call handle_scroll again?\n\t}\n\n\t// trigger initial refresh\n\tonMount(() => {\n\t\trows = contents.getElementsByTagName('svelte-virtual-list-row');\n\t\tmounted = true;\n\t});\n</script>\n\n<style>\n\tsvelte-virtual-list-viewport {\n\t\tposition: relative;\n\t\toverflow-y: auto;\n\t\t-webkit-overflow-scrolling:touch;\n\t\tdisplay: block;\n\t}\n\n\tsvelte-virtual-list-contents, svelte-virtual-list-row {\n\t\tdisplay: block;\n\t}\n\n\tsvelte-virtual-list-row {\n\t\toverflow: hidden;\n\t}\n</style>\n\n<svelte-virtual-list-viewport\n\tbind:this={viewport}\n\tbind:offsetHeight={viewport_height}\n\ton:scroll={handle_scroll}\n\tstyle=\"height: {height};\"\n>\n\t<svelte-virtual-list-contents\n\t\tbind:this={contents}\n\t\tstyle=\"padding-top: {top}px; padding-bottom: {bottom}px;\"\n\t>\n\t\t{#each visible as row (row.index)}\n\t\t\t<svelte-virtual-list-row>\n\t\t\t\t<slot item={row.data}>Missing template</slot>\n\t\t\t</svelte-virtual-list-row>\n\t\t{/each}\n\t</svelte-virtual-list-contents>\n</svelte-virtual-list-viewport>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport emojiGroups from '$lib/emoji-groups.json';\n\timport emojiShortCodes from '$lib/emoji-shortcodes.json';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport VirtualList from '@sveltejs/svelte-virtual-list';\n\n\texport let onClose = () => {};\n\texport let onSubmit = (name) => {};\n\texport let side = 'top';\n\texport let align = 'start';\n\texport let user = null;\n\n\tlet show = false;\n\tlet emojis = emojiShortCodes;\n\tlet search = '';\n\tlet flattenedEmojis = [];\n\tlet emojiRows = [];\n\n\t// Reactive statement to filter the emojis based on search query\n\t$: {\n\t\tif (search) {\n\t\t\temojis = Object.keys(emojiShortCodes).reduce((acc, key) => {\n\t\t\t\tif (key.includes(search)) {\n\t\t\t\t\tacc[key] = emojiShortCodes[key];\n\t\t\t\t} else {\n\t\t\t\t\tif (Array.isArray(emojiShortCodes[key])) {\n\t\t\t\t\t\tconst filtered = emojiShortCodes[key].filter((emoji) => emoji.includes(search));\n\t\t\t\t\t\tif (filtered.length) {\n\t\t\t\t\t\t\tacc[key] = filtered;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (emojiShortCodes[key].includes(search)) {\n\t\t\t\t\t\t\tacc[key] = emojiShortCodes[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\t} else {\n\t\t\temojis = emojiShortCodes;\n\t\t}\n\t}\n\t// Flatten emoji groups and group them into rows of 8 for virtual scrolling\n\t$: {\n\t\tflattenedEmojis = [];\n\t\tObject.keys(emojiGroups).forEach((group) => {\n\t\t\tconst groupEmojis = emojiGroups[group].filter((emoji) => emojis[emoji]);\n\t\t\tif (groupEmojis.length > 0) {\n\t\t\t\tflattenedEmojis.push({ type: 'group', label: group });\n\t\t\t\tflattenedEmojis.push(\n\t\t\t\t\t...groupEmojis.map((emoji) => ({\n\t\t\t\t\t\ttype: 'emoji',\n\t\t\t\t\t\tname: emoji,\n\t\t\t\t\t\tshortCodes:\n\t\t\t\t\t\t\ttypeof emojiShortCodes[emoji] === 'string'\n\t\t\t\t\t\t\t\t? [emojiShortCodes[emoji]]\n\t\t\t\t\t\t\t\t: emojiShortCodes[emoji]\n\t\t\t\t\t}))\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\t// Group emojis into rows of 8\n\t\temojiRows = [];\n\t\tlet currentRow = [];\n\t\tflattenedEmojis.forEach((item) => {\n\t\t\tif (item.type === 'emoji') {\n\t\t\t\tcurrentRow.push(item);\n\t\t\t\tif (currentRow.length === 8) {\n\t\t\t\t\temojiRows.push(currentRow);\n\t\t\t\t\tcurrentRow = [];\n\t\t\t\t}\n\t\t\t} else if (item.type === 'group') {\n\t\t\t\tif (currentRow.length > 0) {\n\t\t\t\t\temojiRows.push(currentRow); // Push the remaining row\n\t\t\t\t\tcurrentRow = [];\n\t\t\t\t}\n\t\t\t\temojiRows.push([item]); // Add the group label as a separate row\n\t\t\t}\n\t\t});\n\t\tif (currentRow.length > 0) {\n\t\t\temojiRows.push(currentRow); // Push the final row\n\t\t}\n\t}\n\tconst ROW_HEIGHT = 48; // Approximate height for a row with multiple emojis\n\t// Handle emoji selection\n\tfunction selectEmoji(emoji) {\n\t\tconst selectedCode = emoji.shortCodes[0];\n\t\tonSubmit(selectedCode);\n\t\tshow = false;\n\t}\n</script>\n\n<DropdownMenu.Root\n\tbind:open={show}\n\tcloseFocus={false}\n\tonOpenChange={(state) => {\n\t\tif (!state) {\n\t\t\tsearch = '';\n\t\t\tonClose();\n\t\t}\n\t}}\n\ttypeahead={false}\n>\n\t<DropdownMenu.Trigger>\n\t\t<slot />\n\t</DropdownMenu.Trigger>\n\t<DropdownMenu.Content\n\t\tclass=\"max-w-full w-80 bg-gray-50 dark:bg-gray-850 rounded-lg z-9999 shadow-lg dark:text-white\"\n\t\tsideOffset={8}\n\t\t{side}\n\t\t{align}\n\t\ttransition={flyAndScale}\n\t>\n\t\t<div class=\"mb-1 px-3 pt-2 pb-2\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"w-full text-sm bg-transparent outline-hidden\"\n\t\t\t\tplaceholder=\"Search all emojis\"\n\t\t\t\tbind:value={search}\n\t\t\t/>\n\t\t</div>\n\t\t<!-- Virtualized Emoji List -->\n\t\t<div class=\"w-full flex justify-start h-96 overflow-y-auto px-3 pb-3 text-sm\">\n\t\t\t{#if emojiRows.length === 0}\n\t\t\t\t<div class=\"text-center text-xs text-gray-500 dark:text-gray-400\">No results</div>\n\t\t\t{:else}\n\t\t\t\t<div class=\"w-full flex ml-0.5\">\n\t\t\t\t\t<VirtualList rowHeight={ROW_HEIGHT} items={emojiRows} height={384} let:item>\n\t\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t\t{#if item.length === 1 && item[0].type === 'group'}\n\t\t\t\t\t\t\t\t<!-- Render group header -->\n\t\t\t\t\t\t\t\t<div class=\"text-xs font-medium mb-2 text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t\t\t\t{item[0].label}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<!-- Render emojis in a row -->\n\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-1.5 w-full\">\n\t\t\t\t\t\t\t\t\t{#each item as emojiItem}\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tcontent={emojiItem.shortCodes.map((code) => `:${code}:`).join(', ')}\n\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"p-1.5 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => selectEmoji(emojiItem)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"/assets/emojis/{emojiItem.name.toLowerCase()}.svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={emojiItem.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-5\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</VirtualList>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</DropdownMenu.Content>\n</DropdownMenu.Root>\n","<script lang=\"ts\">\n\timport dayjs from 'dayjs';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\timport isToday from 'dayjs/plugin/isToday';\n\timport isYesterday from 'dayjs/plugin/isYesterday';\n\timport localizedFormat from 'dayjs/plugin/localizedFormat';\n\n\tdayjs.extend(relativeTime);\n\tdayjs.extend(isToday);\n\tdayjs.extend(isYesterday);\n\tdayjs.extend(localizedFormat);\n\n\timport { getContext, onMount } from 'svelte';\n\tconst i18n = getContext<Writable<i18nType>>('i18n');\n\n\timport { settings, user, shortCodesToEmojis } from '$lib/stores';\n\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\n\timport Markdown from '$lib/components/chat/Messages/Markdown.svelte';\n\timport ProfileImage from '$lib/components/chat/Messages/ProfileImage.svelte';\n\timport Name from '$lib/components/chat/Messages/Name.svelte';\n\timport ConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\timport GarbageBin from '$lib/components/icons/GarbageBin.svelte';\n\timport Pencil from '$lib/components/icons/Pencil.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Textarea from '$lib/components/common/Textarea.svelte';\n\timport Image from '$lib/components/common/Image.svelte';\n\timport FileItem from '$lib/components/common/FileItem.svelte';\n\timport ProfilePreview from './Message/ProfilePreview.svelte';\n\timport ChatBubbleOvalEllipsis from '$lib/components/icons/ChatBubbleOvalEllipsis.svelte';\n\timport FaceSmile from '$lib/components/icons/FaceSmile.svelte';\n\timport ReactionPicker from './Message/ReactionPicker.svelte';\n\timport ChevronRight from '$lib/components/icons/ChevronRight.svelte';\n\timport { formatDate } from '$lib/utils';\n\n\texport let message;\n\texport let showUserProfile = true;\n\texport let thread = false;\n\n\texport let onDelete: Function = () => {};\n\texport let onEdit: Function = () => {};\n\texport let onThread: Function = () => {};\n\texport let onReaction: Function = () => {};\n\n\tlet showButtons = false;\n\n\tlet edit = false;\n\tlet editedContent = null;\n\tlet showDeleteConfirmDialog = false;\n</script>\n\n<ConfirmDialog\n\tbind:show={showDeleteConfirmDialog}\n\ttitle={$i18n.t('Delete Message')}\n\tmessage={$i18n.t('Are you sure you want to delete this message?')}\n\tonConfirm={async () => {\n\t\tawait onDelete();\n\t}}\n/>\n\n{#if message}\n\t<div\n\t\tclass=\"flex flex-col justify-between px-5 {showUserProfile\n\t\t\t? 'pt-1.5 pb-0.5'\n\t\t\t: ''} w-full {($settings?.widescreenMode ?? null)\n\t\t\t? 'max-w-full'\n\t\t\t: 'max-w-5xl'} mx-auto group hover:bg-gray-300/5 dark:hover:bg-gray-700/5 transition relative\"\n\t>\n\t\t{#if !edit}\n\t\t\t<div\n\t\t\t\tclass=\" absolute {showButtons ? '' : 'invisible group-hover:visible'} right-1 -top-2 z-10\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex gap-1 rounded-lg bg-white dark:bg-gray-850 shadow-md p-0.5 border border-gray-100 dark:border-gray-850\"\n\t\t\t\t>\n\t\t\t\t\t<ReactionPicker\n\t\t\t\t\t\tonClose={() => (showButtons = false)}\n\t\t\t\t\t\tonSubmit={(name) => {\n\t\t\t\t\t\t\tshowButtons = false;\n\t\t\t\t\t\t\tonReaction(name);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Add Reaction')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tshowButtons = true;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FaceSmile />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</ReactionPicker>\n\n\t\t\t\t\t{#if !thread}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Reply in Thread')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tonThread(message.id);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ChatBubbleOvalEllipsis />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if message.user_id === $user.id || $user.role === 'admin'}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Edit')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tedit = true;\n\t\t\t\t\t\t\t\t\teditedContent = message.content;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Pencil />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Delete')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => (showDeleteConfirmDialog = true)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<GarbageBin />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<div\n\t\t\tclass=\" flex w-full message-{message.id}\"\n\t\t\tid=\"message-{message.id}\"\n\t\t\tdir={$settings.chatDirection}\n\t\t>\n\t\t\t<div\n\t\t\t\tclass={`shrink-0 ${($settings?.chatDirection ?? 'LTR') === 'LTR' ? 'mr-3' : 'ml-3'} w-9`}\n\t\t\t>\n\t\t\t\t{#if showUserProfile}\n\t\t\t\t\t<ProfilePreview user={message.user}>\n\t\t\t\t\t\t<ProfileImage\n\t\t\t\t\t\t\tsrc={message.user?.profile_image_url ??\n\t\t\t\t\t\t\t\t($i18n.language === 'dg-DG' ? `/doge.png` : `${WEBUI_BASE_URL}/static/favicon.png`)}\n\t\t\t\t\t\t\tclassName={'size-8 translate-y-1 ml-0.5'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ProfilePreview>\n\t\t\t\t{:else}\n\t\t\t\t\t<!-- <div class=\"w-7 h-7 rounded-full bg-transparent\" /> -->\n\n\t\t\t\t\t{#if message.created_at}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"mt-1.5 flex shrink-0 items-center text-xs self-center invisible group-hover:visible text-gray-500 font-medium first-letter:capitalize\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tooltip content={dayjs(message.created_at / 1000000).format('LLLL')}>\n\t\t\t\t\t\t\t\t{dayjs(message.created_at / 1000000).format('HH:mm')}\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"flex-auto w-0 pl-1\">\n\t\t\t\t{#if showUserProfile}\n\t\t\t\t\t<Name>\n\t\t\t\t\t\t<div class=\" self-end text-base shrink-0 font-medium truncate\">\n\t\t\t\t\t\t\t{message?.user?.name}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if message.created_at}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\" self-center text-xs invisible group-hover:visible text-gray-400 font-medium first-letter:capitalize ml-0.5 translate-y-[1px]\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Tooltip content={dayjs(message.created_at / 1000000).format('LLLL')}>\n\t\t\t\t\t\t\t\t\t<span class=\"line-clamp-1\">{formatDate(message.created_at / 1000000)}</span>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</Name>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if (message?.data?.files ?? []).length > 0}\n\t\t\t\t\t<div class=\"my-2.5 w-full flex overflow-x-auto gap-2 flex-wrap\">\n\t\t\t\t\t\t{#each message?.data?.files as file}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t<Image src={file.url} alt={file.name} imageClassName=\" max-h-96 rounded-lg\" />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\turl={file.url}\n\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\tcolorClassName=\"bg-white dark:bg-gray-850 \"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if edit}\n\t\t\t\t\t<div class=\"py-2\">\n\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\tclassName=\" bg-transparent outline-hidden w-full resize-none\"\n\t\t\t\t\t\t\tbind:value={editedContent}\n\t\t\t\t\t\t\tonKeydown={(e) => {\n\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('close-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst isCmdOrCtrlPressed = e.metaKey || e.ctrlKey;\n\t\t\t\t\t\t\t\tconst isEnterPressed = e.key === 'Enter';\n\n\t\t\t\t\t\t\t\tif (isCmdOrCtrlPressed && isEnterPressed) {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('confirm-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\" mt-2 mb-1 flex justify-end text-sm font-medium\">\n\t\t\t\t\t\t\t<div class=\"flex space-x-1.5\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"close-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\"px-4 py-2 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tedit = false;\n\t\t\t\t\t\t\t\t\t\teditedContent = null;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"confirm-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\tonEdit(editedContent);\n\t\t\t\t\t\t\t\t\t\tedit = false;\n\t\t\t\t\t\t\t\t\t\teditedContent = null;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\" min-w-full markdown-prose\">\n\t\t\t\t\t\t<Markdown\n\t\t\t\t\t\t\tid={message.id}\n\t\t\t\t\t\t\tcontent={message.content}\n\t\t\t\t\t\t/>{#if message.created_at !== message.updated_at}<span class=\"text-gray-500 text-[10px]\"\n\t\t\t\t\t\t\t\t>(edited)</span\n\t\t\t\t\t\t\t>{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if (message?.reactions ?? []).length > 0}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"flex items-center flex-wrap gap-y-1.5 gap-1 mt-1 mb-2\">\n\t\t\t\t\t\t\t\t{#each message.reactions as reaction}\n\t\t\t\t\t\t\t\t\t<Tooltip content={`:${reaction.name}:`}>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center gap-1.5 transition rounded-xl px-2 py-1 cursor-pointer {reaction.user_ids.includes(\n\t\t\t\t\t\t\t\t\t\t\t\t$user.id\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t? ' bg-blue-300/10 outline outline-blue-500/50 outline-1'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'bg-gray-300/10 dark:bg-gray-500/10 hover:outline hover:outline-gray-700/30 dark:hover:outline-gray-300/30 hover:outline-1'}\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tonReaction(reaction.name);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{#if $shortCodesToEmojis[reaction.name]}\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"/assets/emojis/{$shortCodesToEmojis[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treaction.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t].toLowerCase()}.svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={reaction.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" size-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{reaction.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t\t{#if reaction.user_ids.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{reaction.user_ids?.length}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/each}\n\n\t\t\t\t\t\t\t\t<ReactionPicker\n\t\t\t\t\t\t\t\t\tonSubmit={(name) => {\n\t\t\t\t\t\t\t\t\t\tonReaction(name);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Add Reaction')}>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center gap-1.5 bg-gray-500/10 hover:outline hover:outline-gray-700/30 dark:hover:outline-gray-300/30 hover:outline-1 transition rounded-xl px-1 py-1 cursor-pointer text-gray-500 dark:text-gray-400\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FaceSmile />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</ReactionPicker>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if !thread && message.reply_count > 0}\n\t\t\t\t\t\t<div class=\"flex items-center gap-1.5 -mt-0.5 mb-1.5\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"flex items-center text-xs py-1 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tonThread(message.id);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"font-medium mr-1\">\n\t\t\t\t\t\t\t\t\t{$i18n.t('{{COUNT}} Replies', { COUNT: message.reply_count })}</span\n\t\t\t\t\t\t\t\t><span>\n\t\t\t\t\t\t\t\t\t{' - '}{$i18n.t('Last reply')}\n\t\t\t\t\t\t\t\t\t{dayjs.unix(message.latest_reply_at / 1000000000).fromNow()}</span\n\t\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t<span class=\"ml-1\">\n\t\t\t\t\t\t\t\t\t<ChevronRight className=\"size-2.5\" strokeWidth=\"3\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<!-- {$i18n.t('View Replies')} -->\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport dayjs from 'dayjs';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\timport isToday from 'dayjs/plugin/isToday';\n\timport isYesterday from 'dayjs/plugin/isYesterday';\n\n\tdayjs.extend(relativeTime);\n\tdayjs.extend(isToday);\n\tdayjs.extend(isYesterday);\n\timport { tick, getContext, onMount, createEventDispatcher } from 'svelte';\n\n\timport { settings, user } from '$lib/stores';\n\n\timport Message from './Messages/Message.svelte';\n\timport Loader from '../common/Loader.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\timport { addReaction, deleteMessage, removeReaction, updateMessage } from '$lib/apis/channels';\n\n\tconst i18n = getContext('i18n');\n\n\texport let id = null;\n\texport let channel = null;\n\texport let messages = [];\n\texport let top = false;\n\texport let thread = false;\n\n\texport let onLoad: Function = () => {};\n\texport let onThread: Function = () => {};\n\n\tlet messagesLoading = false;\n\n\tconst loadMoreMessages = async () => {\n\t\t// scroll slightly down to disable continuous loading\n\t\tconst element = document.getElementById('messages-container');\n\t\telement.scrollTop = element.scrollTop + 100;\n\n\t\tmessagesLoading = true;\n\n\t\tawait onLoad();\n\n\t\tawait tick();\n\t\tmessagesLoading = false;\n\t};\n</script>\n\n{#if messages}\n\t{@const messageList = messages.slice().reverse()}\n\t<div>\n\t\t{#if !top}\n\t\t\t<Loader\n\t\t\t\ton:visible={(e) => {\n\t\t\t\t\tconsole.log('visible');\n\t\t\t\t\tif (!messagesLoading) {\n\t\t\t\t\t\tloadMoreMessages();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\"w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2\">\n\t\t\t\t\t<Spinner className=\" size-4\" />\n\t\t\t\t\t<div class=\" \">Loading...</div>\n\t\t\t\t</div>\n\t\t\t</Loader>\n\t\t{:else if !thread}\n\t\t\t<div\n\t\t\t\tclass=\"px-5\n\t\t\t\n\t\t\t{($settings?.widescreenMode ?? null) ? 'max-w-full' : 'max-w-5xl'} mx-auto\"\n\t\t\t>\n\t\t\t\t{#if channel}\n\t\t\t\t\t<div class=\"flex flex-col gap-1.5 pb-5 pt-10\">\n\t\t\t\t\t\t<div class=\"text-2xl font-medium capitalize\">{channel.name}</div>\n\n\t\t\t\t\t\t<div class=\" text-gray-500\">\n\t\t\t\t\t\t\tThis channel was created on {dayjs(channel.created_at / 1000000).format(\n\t\t\t\t\t\t\t\t'MMMM D, YYYY'\n\t\t\t\t\t\t\t)}. This is the very beginning of the {channel.name}\n\t\t\t\t\t\t\tchannel.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"flex justify-center text-xs items-center gap-2 py-5\">\n\t\t\t\t\t\t<div class=\" \">Start of the channel</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if messageList.length > 0}\n\t\t\t\t\t<hr class=\" border-gray-50 dark:border-gray-700/20 py-2.5 w-full\" />\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#each messageList as message, messageIdx (id ? `${id}-${message.id}` : message.id)}\n\t\t\t<Message\n\t\t\t\t{message}\n\t\t\t\t{thread}\n\t\t\t\tshowUserProfile={messageIdx === 0 ||\n\t\t\t\t\tmessageList.at(messageIdx - 1)?.user_id !== message.user_id}\n\t\t\t\tonDelete={() => {\n\t\t\t\t\tmessages = messages.filter((m) => m.id !== message.id);\n\n\t\t\t\t\tconst res = deleteMessage(localStorage.token, message.channel_id, message.id).catch(\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\tonEdit={(content) => {\n\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\tm.content = content;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn m;\n\t\t\t\t\t});\n\n\t\t\t\t\tconst res = updateMessage(localStorage.token, message.channel_id, message.id, {\n\t\t\t\t\t\tcontent: content\n\t\t\t\t\t}).catch((error) => {\n\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonThread={(id) => {\n\t\t\t\t\tonThread(id);\n\t\t\t\t}}\n\t\t\t\tonReaction={(name) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t(message?.reactions ?? [])\n\t\t\t\t\t\t\t.find((reaction) => reaction.name === name)\n\t\t\t\t\t\t\t?.user_ids?.includes($user.id) ??\n\t\t\t\t\t\tfalse\n\t\t\t\t\t) {\n\t\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\t\tconst reaction = m.reactions.find((reaction) => reaction.name === name);\n\n\t\t\t\t\t\t\t\tif (reaction) {\n\t\t\t\t\t\t\t\t\treaction.user_ids = reaction.user_ids.filter((id) => id !== $user.id);\n\t\t\t\t\t\t\t\t\treaction.count = reaction.user_ids.length;\n\n\t\t\t\t\t\t\t\t\tif (reaction.count === 0) {\n\t\t\t\t\t\t\t\t\t\tm.reactions = m.reactions.filter((r) => r.name !== name);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn m;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst res = removeReaction(\n\t\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t\tmessage.channel_id,\n\t\t\t\t\t\t\tmessage.id,\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t).catch((error) => {\n\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\t\tif (m.reactions) {\n\t\t\t\t\t\t\t\t\tconst reaction = m.reactions.find((reaction) => reaction.name === name);\n\n\t\t\t\t\t\t\t\t\tif (reaction) {\n\t\t\t\t\t\t\t\t\t\treaction.user_ids.push($user.id);\n\t\t\t\t\t\t\t\t\t\treaction.count = reaction.user_ids.length;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tm.reactions.push({\n\t\t\t\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\t\t\t\tuser_ids: [$user.id],\n\t\t\t\t\t\t\t\t\t\t\tcount: 1\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn m;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst res = addReaction(localStorage.token, message.channel_id, message.id, name).catch(\n\t\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t{/each}\n\n\t\t<div class=\"pb-6\" />\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { getContext, onMount, tick } from 'svelte';\n\n\timport { config, user, tools as _tools, mobile } from '$lib/stores';\n\timport { getTools } from '$lib/apis/tools';\n\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport DocumentArrowUpSolid from '$lib/components/icons/DocumentArrowUpSolid.svelte';\n\timport Switch from '$lib/components/common/Switch.svelte';\n\timport GlobeAltSolid from '$lib/components/icons/GlobeAltSolid.svelte';\n\timport WrenchSolid from '$lib/components/icons/WrenchSolid.svelte';\n\timport CameraSolid from '$lib/components/icons/CameraSolid.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let screenCaptureHandler: Function;\n\texport let uploadFilesHandler: Function;\n\n\texport let onClose: Function = () => {};\n\n\tlet show = false;\n\n\t$: if (show) {\n\t\tinit();\n\t}\n\n\tconst init = async () => {};\n</script>\n\n<Dropdown\n\tbind:show\n\ton:change={(e) => {\n\t\tif (e.detail === false) {\n\t\t\tonClose();\n\t\t}\n\t}}\n>\n\t<Tooltip content={$i18n.t('More')}>\n\t\t<slot />\n\t</Tooltip>\n\n\t<div slot=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full max-w-[200px] rounded-xl px-1 py-1  border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm\"\n\t\t\tsideOffset={15}\n\t\t\talignOffset={-8}\n\t\t\tside=\"top\"\n\t\t\talign=\"start\"\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t{#if !$mobile}\n\t\t\t\t<DropdownMenu.Item\n\t\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tscreenCaptureHandler();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<CameraSolid />\n\t\t\t\t\t<div class=\" line-clamp-1\">{$i18n.t('Capture')}</div>\n\t\t\t\t</DropdownMenu.Item>\n\t\t\t{/if}\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tuploadFilesHandler();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<DocumentArrowUpSolid />\n\t\t\t\t<div class=\"line-clamp-1\">{$i18n.t('Upload Files')}</div>\n\t\t\t</DropdownMenu.Item>\n\t\t</DropdownMenu.Content>\n\t</div>\n</Dropdown>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { v4 as uuidv4 } from 'uuid';\n\n\timport { tick, getContext, onMount, onDestroy } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\timport { config, mobile, settings, socket } from '$lib/stores';\n\timport { blobToFile, compressImage } from '$lib/utils';\n\n\timport Tooltip from '../common/Tooltip.svelte';\n\timport RichTextInput from '../common/RichTextInput.svelte';\n\timport VoiceRecording from '../chat/MessageInput/VoiceRecording.svelte';\n\timport InputMenu from './MessageInput/InputMenu.svelte';\n\timport { uploadFile } from '$lib/apis/files';\n\timport { WEBUI_API_BASE_URL } from '$lib/constants';\n\timport FileItem from '../common/FileItem.svelte';\n\timport Image from '../common/Image.svelte';\n\timport { transcribeAudio } from '$lib/apis/audio';\n\timport FilesOverlay from '../chat/MessageInput/FilesOverlay.svelte';\n\n\texport let placeholder = $i18n.t('Send a Message');\n\texport let transparentBackground = false;\n\n\texport let id = null;\n\n\tlet draggedOver = false;\n\n\tlet recording = false;\n\tlet content = '';\n\tlet files = [];\n\n\tlet filesInputElement;\n\tlet inputFiles;\n\n\texport let typingUsers = [];\n\n\texport let onSubmit: Function;\n\texport let onChange: Function;\n\texport let scrollEnd = true;\n\texport let scrollToBottom: Function = () => {};\n\n\tconst screenCaptureHandler = async () => {\n\t\ttry {\n\t\t\t// Request screen media\n\t\t\tconst mediaStream = await navigator.mediaDevices.getDisplayMedia({\n\t\t\t\tvideo: { cursor: 'never' },\n\t\t\t\taudio: false\n\t\t\t});\n\t\t\t// Once the user selects a screen, temporarily create a video element\n\t\t\tconst video = document.createElement('video');\n\t\t\tvideo.srcObject = mediaStream;\n\t\t\t// Ensure the video loads without affecting user experience or tab switching\n\t\t\tawait video.play();\n\t\t\t// Set up the canvas to match the video dimensions\n\t\t\tconst canvas = document.createElement('canvas');\n\t\t\tcanvas.width = video.videoWidth;\n\t\t\tcanvas.height = video.videoHeight;\n\t\t\t// Grab a single frame from the video stream using the canvas\n\t\t\tconst context = canvas.getContext('2d');\n\t\t\tcontext.drawImage(video, 0, 0, canvas.width, canvas.height);\n\t\t\t// Stop all video tracks (stop screen sharing) after capturing the image\n\t\t\tmediaStream.getTracks().forEach((track) => track.stop());\n\n\t\t\t// bring back focus to this current tab, so that the user can see the screen capture\n\t\t\twindow.focus();\n\n\t\t\t// Convert the canvas to a Base64 image URL\n\t\t\tconst imageUrl = canvas.toDataURL('image/png');\n\t\t\t// Add the captured image to the files array to render it\n\t\t\tfiles = [...files, { type: 'image', url: imageUrl }];\n\t\t\t// Clean memory: Clear video srcObject\n\t\t\tvideo.srcObject = null;\n\t\t} catch (error) {\n\t\t\t// Handle any errors (e.g., user cancels screen sharing)\n\t\t\tconsole.error('Error capturing screen:', error);\n\t\t}\n\t};\n\n\tconst inputFilesHandler = async (inputFiles) => {\n\t\tinputFiles.forEach((file) => {\n\t\t\tconsole.log('Processing file:', {\n\t\t\t\tname: file.name,\n\t\t\t\ttype: file.type,\n\t\t\t\tsize: file.size,\n\t\t\t\textension: file.name.split('.').at(-1)\n\t\t\t});\n\n\t\t\tif (\n\t\t\t\t($config?.file?.max_size ?? null) !== null &&\n\t\t\t\tfile.size > ($config?.file?.max_size ?? 0) * 1024 * 1024\n\t\t\t) {\n\t\t\t\tconsole.log('File exceeds max size limit:', {\n\t\t\t\t\tfileSize: file.size,\n\t\t\t\t\tmaxSize: ($config?.file?.max_size ?? 0) * 1024 * 1024\n\t\t\t\t});\n\t\t\t\ttoast.error(\n\t\t\t\t\t$i18n.t(`File size should not exceed {{maxSize}} MB.`, {\n\t\t\t\t\t\tmaxSize: $config?.file?.max_size\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t['image/gif', 'image/webp', 'image/jpeg', 'image/png', 'image/avif'].includes(file['type'])\n\t\t\t) {\n\t\t\t\tlet reader = new FileReader();\n\n\t\t\t\treader.onload = async (event) => {\n\t\t\t\t\tlet imageUrl = event.target.result;\n\n\t\t\t\t\tif ($settings?.imageCompression ?? false) {\n\t\t\t\t\t\tconst width = $settings?.imageCompressionSize?.width ?? null;\n\t\t\t\t\t\tconst height = $settings?.imageCompressionSize?.height ?? null;\n\n\t\t\t\t\t\tif (width || height) {\n\t\t\t\t\t\t\timageUrl = await compressImage(imageUrl, width, height);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfiles = [\n\t\t\t\t\t\t...files,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\turl: `${imageUrl}`\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t};\n\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t} else {\n\t\t\t\tuploadFileHandler(file);\n\t\t\t}\n\t\t});\n\t};\n\n\tconst uploadFileHandler = async (file) => {\n\t\tconst tempItemId = uuidv4();\n\t\tconst fileItem = {\n\t\t\ttype: 'file',\n\t\t\tfile: '',\n\t\t\tid: null,\n\t\t\turl: '',\n\t\t\tname: file.name,\n\t\t\tcollection_name: '',\n\t\t\tstatus: 'uploading',\n\t\t\tsize: file.size,\n\t\t\terror: '',\n\t\t\titemId: tempItemId\n\t\t};\n\n\t\tif (fileItem.size == 0) {\n\t\t\ttoast.error($i18n.t('You cannot upload an empty file.'));\n\t\t\treturn null;\n\t\t}\n\n\t\tfiles = [...files, fileItem];\n\n\t\ttry {\n\t\t\t// During the file upload, file content is automatically extracted.\n\t\t\tconst uploadedFile = await uploadFile(localStorage.token, file);\n\n\t\t\tif (uploadedFile) {\n\t\t\t\tconsole.log('File upload completed:', {\n\t\t\t\t\tid: uploadedFile.id,\n\t\t\t\t\tname: fileItem.name,\n\t\t\t\t\tcollection: uploadedFile?.meta?.collection_name\n\t\t\t\t});\n\n\t\t\t\tif (uploadedFile.error) {\n\t\t\t\t\tconsole.warn('File upload warning:', uploadedFile.error);\n\t\t\t\t\ttoast.warning(uploadedFile.error);\n\t\t\t\t}\n\n\t\t\t\tfileItem.status = 'uploaded';\n\t\t\t\tfileItem.file = uploadedFile;\n\t\t\t\tfileItem.id = uploadedFile.id;\n\t\t\t\tfileItem.collection_name =\n\t\t\t\t\tuploadedFile?.meta?.collection_name || uploadedFile?.collection_name;\n\t\t\t\tfileItem.url = `${WEBUI_API_BASE_URL}/files/${uploadedFile.id}`;\n\n\t\t\t\tfiles = files;\n\t\t\t} else {\n\t\t\t\tfiles = files.filter((item) => item?.itemId !== tempItemId);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\ttoast.error(`${e}`);\n\t\t\tfiles = files.filter((item) => item?.itemId !== tempItemId);\n\t\t}\n\t};\n\n\tconst handleKeyDown = (event: KeyboardEvent) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tconsole.log('Escape');\n\t\t\tdraggedOver = false;\n\t\t}\n\t};\n\n\tconst onDragOver = (e) => {\n\t\te.preventDefault();\n\n\t\t// Check if a file is being draggedOver.\n\t\tif (e.dataTransfer?.types?.includes('Files')) {\n\t\t\tdraggedOver = true;\n\t\t} else {\n\t\t\tdraggedOver = false;\n\t\t}\n\t};\n\n\tconst onDragLeave = () => {\n\t\tdraggedOver = false;\n\t};\n\n\tconst onDrop = async (e) => {\n\t\te.preventDefault();\n\t\tconsole.log(e);\n\n\t\tif (e.dataTransfer?.files) {\n\t\t\tconst inputFiles = Array.from(e.dataTransfer?.files);\n\t\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\t\tconsole.log(inputFiles);\n\t\t\t\tinputFilesHandler(inputFiles);\n\t\t\t}\n\t\t}\n\n\t\tdraggedOver = false;\n\t};\n\n\tconst submitHandler = async () => {\n\t\tif (content === '' && files.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tonSubmit({\n\t\t\tcontent,\n\t\t\tdata: {\n\t\t\t\tfiles: files\n\t\t\t}\n\t\t});\n\n\t\tcontent = '';\n\t\tfiles = [];\n\n\t\tawait tick();\n\n\t\tconst chatInputElement = document.getElementById(`chat-input-${id}`);\n\t\tchatInputElement?.focus();\n\t};\n\n\t$: if (content) {\n\t\tonChange();\n\t}\n\n\tonMount(async () => {\n\t\twindow.setTimeout(() => {\n\t\t\tconst chatInput = document.getElementById(`chat-input-${id}`);\n\t\t\tchatInput?.focus();\n\t\t}, 0);\n\n\t\twindow.addEventListener('keydown', handleKeyDown);\n\t\tawait tick();\n\n\t\tconst dropzoneElement = document.getElementById('channel-container');\n\n\t\tdropzoneElement?.addEventListener('dragover', onDragOver);\n\t\tdropzoneElement?.addEventListener('drop', onDrop);\n\t\tdropzoneElement?.addEventListener('dragleave', onDragLeave);\n\t});\n\n\tonDestroy(() => {\n\t\tconsole.log('destroy');\n\t\twindow.removeEventListener('keydown', handleKeyDown);\n\n\t\tconst dropzoneElement = document.getElementById('channel-container');\n\n\t\tif (dropzoneElement) {\n\t\t\tdropzoneElement?.removeEventListener('dragover', onDragOver);\n\t\t\tdropzoneElement?.removeEventListener('drop', onDrop);\n\t\t\tdropzoneElement?.removeEventListener('dragleave', onDragLeave);\n\t\t}\n\t});\n</script>\n\n<FilesOverlay show={draggedOver} />\n\n<input\n\tbind:this={filesInputElement}\n\tbind:files={inputFiles}\n\ttype=\"file\"\n\thidden\n\tmultiple\n\ton:change={async () => {\n\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\tinputFilesHandler(Array.from(inputFiles));\n\t\t} else {\n\t\t\ttoast.error($i18n.t(`File not found.`));\n\t\t}\n\n\t\tfilesInputElement.value = '';\n\t}}\n/>\n<div class=\"bg-transparent\">\n\t<div\n\t\tclass=\"{($settings?.widescreenMode ?? null)\n\t\t\t? 'max-w-full'\n\t\t\t: 'max-w-6xl'} px-2.5 mx-auto inset-x-0 relative\"\n\t>\n\t\t<div class=\"absolute top-0 left-0 right-0 mx-auto inset-x-0 bg-transparent flex justify-center\">\n\t\t\t<div class=\"flex flex-col px-3 w-full\">\n\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t{#if scrollEnd === false}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\" absolute -top-12 left-0 right-0 flex justify-center z-30 pointer-events-none\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\" bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full pointer-events-auto\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tscrollEnd = true;\n\t\t\t\t\t\t\t\t\tscrollToBottom();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\td=\"M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z\"\n\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t<div class=\" -mt-5\">\n\t\t\t\t\t\t{#if typingUsers.length > 0}\n\t\t\t\t\t\t\t<div class=\" text-xs px-4 mb-1\">\n\t\t\t\t\t\t\t\t<span class=\" font-normal text-black dark:text-white\">\n\t\t\t\t\t\t\t\t\t{typingUsers.map((user) => user.name).join(', ')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{$i18n.t('is typing...')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"\">\n\t\t\t{#if recording}\n\t\t\t\t<VoiceRecording\n\t\t\t\t\tbind:recording\n\t\t\t\t\ton:cancel={async () => {\n\t\t\t\t\t\trecording = false;\n\n\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\tdocument.getElementById(`chat-input-${id}`)?.focus();\n\t\t\t\t\t}}\n\t\t\t\t\ton:confirm={async (e) => {\n\t\t\t\t\t\tconst { text, filename } = e.detail;\n\t\t\t\t\t\tcontent = `${content}${text} `;\n\t\t\t\t\t\trecording = false;\n\n\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\tdocument.getElementById(`chat-input-${id}`)?.focus();\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t{:else}\n\t\t\t\t<form\n\t\t\t\t\tclass=\"w-full flex gap-1.5\"\n\t\t\t\t\ton:submit|preventDefault={() => {\n\t\t\t\t\t\tsubmitHandler();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex-1 flex flex-col relative w-full rounded-3xl px-1 bg-gray-600/5 dark:bg-gray-400/5 dark:text-gray-100\"\n\t\t\t\t\t\tdir={$settings?.chatDirection ?? 'LTR'}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if files.length > 0}\n\t\t\t\t\t\t\t<div class=\"mx-2 mt-2.5 -mb-1 flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t\t{#each files as file, fileIdx}\n\t\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t\t<div class=\" relative group\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={file.url}\n\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"input\"\n\t\t\t\t\t\t\t\t\t\t\t\t\timageClassName=\" h-16 w-16 rounded-xl object-cover\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" absolute -top-1 -right-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" bg-white text-black border border-white rounded-full group-hover:visible invisible transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfiles.splice(fileIdx, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfiles = files;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\t\tloading={file.status === 'uploading'}\n\t\t\t\t\t\t\t\t\t\t\tdismissible={true}\n\t\t\t\t\t\t\t\t\t\t\tedit={true}\n\t\t\t\t\t\t\t\t\t\t\ton:dismiss={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tfiles.splice(fileIdx, 1);\n\t\t\t\t\t\t\t\t\t\t\t\tfiles = files;\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(file);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div class=\"px-2.5\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"scrollbar-hidden font-primary text-left bg-transparent dark:text-gray-100 outline-hidden w-full pt-3 px-1 rounded-xl resize-none h-fit max-h-80 overflow-auto\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RichTextInput\n\t\t\t\t\t\t\t\t\tbind:value={content}\n\t\t\t\t\t\t\t\t\tid={`chat-input-${id}`}\n\t\t\t\t\t\t\t\t\tmessageInput={true}\n\t\t\t\t\t\t\t\t\tshiftEnter={!$mobile ||\n\t\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\t\t'ontouchstart' in window ||\n\t\t\t\t\t\t\t\t\t\t\tnavigator.maxTouchPoints > 0 ||\n\t\t\t\t\t\t\t\t\t\t\tnavigator.msMaxTouchPoints > 0\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{placeholder}\n\t\t\t\t\t\t\t\t\tlargeTextAsFile={$settings?.largeTextAsFile ?? false}\n\t\t\t\t\t\t\t\t\ton:keydown={async (e) => {\n\t\t\t\t\t\t\t\t\t\te = e.detail.event;\n\t\t\t\t\t\t\t\t\t\tconst isCtrlPressed = e.ctrlKey || e.metaKey; // metaKey is for Cmd key on Mac\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t!$mobile ||\n\t\t\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\t\t\t'ontouchstart' in window ||\n\t\t\t\t\t\t\t\t\t\t\t\tnavigator.maxTouchPoints > 0 ||\n\t\t\t\t\t\t\t\t\t\t\t\tnavigator.msMaxTouchPoints > 0\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t// Prevent Enter key from creating a new line\n\t\t\t\t\t\t\t\t\t\t\t// Uses keyCode '13' for Enter key for chinese/japanese keyboards\n\t\t\t\t\t\t\t\t\t\t\tif (e.keyCode === 13 && !e.shiftKey) {\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Submit the content when Enter key is pressed\n\t\t\t\t\t\t\t\t\t\t\tif (content !== '' && e.keyCode === 13 && !e.shiftKey) {\n\t\t\t\t\t\t\t\t\t\t\t\tsubmitHandler();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('Escape');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ton:paste={async (e) => {\n\t\t\t\t\t\t\t\t\t\te = e.detail.event;\n\t\t\t\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\" flex justify-between mb-2.5 mt-1.5 mx-0.5\">\n\t\t\t\t\t\t\t<div class=\"ml-1 self-end flex space-x-1\">\n\t\t\t\t\t\t\t\t<InputMenu\n\t\t\t\t\t\t\t\t\t{screenCaptureHandler}\n\t\t\t\t\t\t\t\t\tuploadFilesHandler={() => {\n\t\t\t\t\t\t\t\t\t\tfilesInputElement.click();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent hover:bg-white/80 text-gray-800 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5 outline-hidden focus:outline-hidden\"\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"More\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</InputMenu>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"self-end flex space-x-1 mr-1\">\n\t\t\t\t\t\t\t\t{#if content === ''}\n\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Record voice')}>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tid=\"voice-input-button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\" text-gray-600 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-200 transition rounded-full p-1.5 mr-0.5 self-center\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet stream = await navigator.mediaDevices\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getUserMedia({ audio: true })\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.catch(function (err) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$i18n.t(`Permission denied when accessing microphone: {{error}}`, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terror: err\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (stream) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecording = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst tracks = stream.getTracks();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttracks.forEach((track) => track.stop());\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstream = null;\n\t\t\t\t\t\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.error($i18n.t('Permission denied when accessing microphone'));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"Voice Input\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5 translate-y-[0.5px]\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path d=\"M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t<div class=\" flex items-center\">\n\t\t\t\t\t\t\t\t\t<div class=\" flex items-center\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Send message')}>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"send-message-button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{content !== '' || files.length !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 '\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled'} transition rounded-full p-1.5 self-center\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={content === '' && files.length === 0}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-5\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { getContext } from 'svelte';\n\timport { toast } from 'svelte-sonner';\n\n\timport { showArchivedChats, showSidebar, user } from '$lib/stores';\n\n\timport { slide } from 'svelte/transition';\n\timport { page } from '$app/stores';\n\n\timport UserMenu from '$lib/components/layout/Sidebar/UserMenu.svelte';\n\timport MenuLines from '../icons/MenuLines.svelte';\n\timport PencilSquare from '../icons/PencilSquare.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let channel;\n</script>\n\n<nav class=\"sticky top-0 z-30 w-full px-1.5 py-1.5 -mb-8 flex items-center drag-region\">\n\t<div\n\t\tclass=\" bg-linear-to-b via-50% from-white via-white to-transparent dark:from-gray-900 dark:via-gray-900 dark:to-transparent pointer-events-none absolute inset-0 -bottom-7 z-[-1]\"\n\t></div>\n\n\t<div class=\" flex max-w-full w-full mx-auto px-1 pt-0.5 bg-transparent\">\n\t\t<div class=\"flex items-center w-full max-w-full\">\n\t\t\t<div\n\t\t\t\tclass=\"{$showSidebar\n\t\t\t\t\t? 'md:hidden'\n\t\t\t\t\t: ''} mr-1 self-start flex flex-none items-center text-gray-600 dark:text-gray-400\"\n\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\tid=\"sidebar-toggle-button\"\n\t\t\t\t\tclass=\"cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshowSidebar.set(!$showSidebar);\n\t\t\t\t\t}}\n\t\t\t\t\taria-label=\"Toggle Sidebar\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\" m-auto self-center\">\n\t\t\t\t\t\t<MenuLines />\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\"flex-1 overflow-hidden max-w-full py-0.5\n\t\t\t{$showSidebar ? 'ml-1' : ''}\n\t\t\t\"\n\t\t\t>\n\t\t\t\t{#if channel}\n\t\t\t\t\t<div class=\"line-clamp-1 capitalize font-medium font-primary text-lg\">\n\t\t\t\t\t\t{channel.name}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"self-start flex flex-none items-center text-gray-600 dark:text-gray-400\">\n\t\t\t\t{#if $user !== undefined}\n\t\t\t\t\t<UserMenu\n\t\t\t\t\t\tclassName=\"max-w-[200px]\"\n\t\t\t\t\t\trole={$user.role}\n\t\t\t\t\t\ton:show={(e) => {\n\t\t\t\t\t\t\tif (e.detail === 'archived-chat') {\n\t\t\t\t\t\t\t\tshowArchivedChats.set(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\n\t\t\t\t\t\t\taria-label=\"User Menu\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\" self-center\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={$user.profile_image_url}\n\t\t\t\t\t\t\t\t\tclass=\"size-6 object-cover rounded-full\"\n\t\t\t\t\t\t\t\t\talt=\"User profile\"\n\t\t\t\t\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</UserMenu>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</nav>\n","<script lang=\"ts\">\n\timport { goto } from '$app/navigation';\n\n\timport { socket, user } from '$lib/stores';\n\n\timport { getChannelThreadMessages, sendMessage } from '$lib/apis/channels';\n\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport MessageInput from './MessageInput.svelte';\n\timport Messages from './Messages.svelte';\n\timport { onDestroy, onMount, tick } from 'svelte';\n\timport { toast } from 'svelte-sonner';\n\n\texport let threadId = null;\n\texport let channel = null;\n\n\texport let onClose = () => {};\n\n\tlet messages = null;\n\tlet top = false;\n\n\tlet typingUsers = [];\n\tlet typingUsersTimeout = {};\n\n\tlet messagesContainerElement = null;\n\n\t$: if (threadId) {\n\t\tinitHandler();\n\t}\n\n\tconst scrollToBottom = () => {\n\t\tmessagesContainerElement.scrollTop = messagesContainerElement.scrollHeight;\n\t};\n\n\tconst initHandler = async () => {\n\t\tmessages = null;\n\t\ttop = false;\n\n\t\ttypingUsers = [];\n\t\ttypingUsersTimeout = {};\n\n\t\tif (channel) {\n\t\t\tmessages = await getChannelThreadMessages(localStorage.token, channel.id, threadId);\n\n\t\t\tif (messages.length < 50) {\n\t\t\t\ttop = true;\n\t\t\t}\n\n\t\t\tawait tick();\n\t\t\tscrollToBottom();\n\t\t} else {\n\t\t\tgoto('/');\n\t\t}\n\t};\n\n\tconst channelEventHandler = async (event) => {\n\t\tconsole.log(event);\n\t\tif (event.channel_id === channel.id) {\n\t\t\tconst type = event?.data?.type ?? null;\n\t\t\tconst data = event?.data?.data ?? null;\n\n\t\t\tif (type === 'message') {\n\t\t\t\tif ((data?.parent_id ?? null) === threadId) {\n\t\t\t\t\tif (messages) {\n\t\t\t\t\t\tmessages = [data, ...messages];\n\n\t\t\t\t\t\tif (typingUsers.find((user) => user.id === event.user.id)) {\n\t\t\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'message:update') {\n\t\t\t\tif (messages) {\n\t\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\n\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'message:delete') {\n\t\t\t\tif (messages) {\n\t\t\t\t\tmessages = messages.filter((message) => message.id !== data.id);\n\t\t\t\t}\n\t\t\t} else if (type.includes('message:reaction')) {\n\t\t\t\tif (messages) {\n\t\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'typing' && event.message_id === threadId) {\n\t\t\t\tif (event.user.id === $user.id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttypingUsers = data.typing\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t...typingUsers,\n\t\t\t\t\t\t\t...(typingUsers.find((user) => user.id === event.user.id)\n\t\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: event.user.id,\n\t\t\t\t\t\t\t\t\t\t\tname: event.user.name\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]\n\t\t\t\t\t: typingUsers.filter((user) => user.id !== event.user.id);\n\n\t\t\t\tif (typingUsersTimeout[event.user.id]) {\n\t\t\t\t\tclearTimeout(typingUsersTimeout[event.user.id]);\n\t\t\t\t}\n\n\t\t\t\ttypingUsersTimeout[event.user.id] = setTimeout(() => {\n\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst submitHandler = async ({ content, data }) => {\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst res = await sendMessage(localStorage.token, channel.id, {\n\t\t\tparent_id: threadId,\n\t\t\tcontent: content,\n\t\t\tdata: data\n\t\t}).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\t};\n\n\tconst onChange = async () => {\n\t\t$socket?.emit('channel-events', {\n\t\t\tchannel_id: channel.id,\n\t\t\tmessage_id: threadId,\n\t\t\tdata: {\n\t\t\t\ttype: 'typing',\n\t\t\t\tdata: {\n\t\t\t\t\ttyping: true\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tonMount(() => {\n\t\t$socket?.on('channel-events', channelEventHandler);\n\t});\n\n\tonDestroy(() => {\n\t\t$socket?.off('channel-events', channelEventHandler);\n\t});\n</script>\n\n{#if channel}\n\t<div class=\"flex flex-col w-full h-full bg-gray-50 dark:bg-gray-850\">\n\t\t<div class=\"flex items-center justify-between px-3.5 pt-3\">\n\t\t\t<div class=\" font-medium text-lg\">Thread</div>\n\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 p-2\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<XMark />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\" max-h-full w-full overflow-y-auto pt-3\" bind:this={messagesContainerElement}>\n\t\t\t<Messages\n\t\t\t\tid={threadId}\n\t\t\t\t{channel}\n\t\t\t\t{messages}\n\t\t\t\t{top}\n\t\t\t\tthread={true}\n\t\t\t\tonLoad={async () => {\n\t\t\t\t\tconst newMessages = await getChannelThreadMessages(\n\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\tchannel.id,\n\t\t\t\t\t\tthreadId,\n\t\t\t\t\t\tmessages.length\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages = [...messages, ...newMessages];\n\n\t\t\t\t\tif (newMessages.length < 50) {\n\t\t\t\t\t\ttop = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\n\t\t\t<div class=\" pb-[1rem]\">\n\t\t\t\t<MessageInput id={threadId} {typingUsers} {onChange} onSubmit={submitHandler} />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { Pane, PaneGroup, PaneResizer } from 'paneforge';\n\n\timport { onDestroy, onMount, tick } from 'svelte';\n\timport { goto } from '$app/navigation';\n\n\timport { chatId, showSidebar, socket, user } from '$lib/stores';\n\timport { getChannelById, getChannelMessages, sendMessage } from '$lib/apis/channels';\n\n\timport Messages from './Messages.svelte';\n\timport MessageInput from './MessageInput.svelte';\n\timport Navbar from './Navbar.svelte';\n\timport Drawer from '../common/Drawer.svelte';\n\timport EllipsisVertical from '../icons/EllipsisVertical.svelte';\n\timport Thread from './Thread.svelte';\n\n\texport let id = '';\n\n\tlet scrollEnd = true;\n\tlet messagesContainerElement = null;\n\n\tlet top = false;\n\n\tlet channel = null;\n\tlet messages = null;\n\n\tlet threadId = null;\n\n\tlet typingUsers = [];\n\tlet typingUsersTimeout = {};\n\n\t$: if (id) {\n\t\tinitHandler();\n\t}\n\n\tconst scrollToBottom = () => {\n\t\tif (messagesContainerElement) {\n\t\t\tmessagesContainerElement.scrollTop = messagesContainerElement.scrollHeight;\n\t\t}\n\t};\n\n\tconst initHandler = async () => {\n\t\ttop = false;\n\t\tmessages = null;\n\t\tchannel = null;\n\t\tthreadId = null;\n\n\t\ttypingUsers = [];\n\t\ttypingUsersTimeout = {};\n\n\t\tchannel = await getChannelById(localStorage.token, id).catch((error) => {\n\t\t\treturn null;\n\t\t});\n\n\t\tif (channel) {\n\t\t\tmessages = await getChannelMessages(localStorage.token, id, 0);\n\n\t\t\tif (messages) {\n\t\t\t\tscrollToBottom();\n\n\t\t\t\tif (messages.length < 50) {\n\t\t\t\t\ttop = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tgoto('/');\n\t\t}\n\t};\n\n\tconst channelEventHandler = async (event) => {\n\t\tif (event.channel_id === id) {\n\t\t\tconst type = event?.data?.type ?? null;\n\t\t\tconst data = event?.data?.data ?? null;\n\n\t\t\tif (type === 'message') {\n\t\t\t\tif ((data?.parent_id ?? null) === null) {\n\t\t\t\t\tmessages = [data, ...messages];\n\n\t\t\t\t\tif (typingUsers.find((user) => user.id === event.user.id)) {\n\t\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tawait tick();\n\t\t\t\t\tif (scrollEnd) {\n\t\t\t\t\t\tscrollToBottom();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'message:update') {\n\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t}\n\t\t\t} else if (type === 'message:delete') {\n\t\t\t\tmessages = messages.filter((message) => message.id !== data.id);\n\t\t\t} else if (type === 'message:reply') {\n\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t}\n\t\t\t} else if (type.includes('message:reaction')) {\n\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t}\n\t\t\t} else if (type === 'typing' && event.message_id === null) {\n\t\t\t\tif (event.user.id === $user.id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttypingUsers = data.typing\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t...typingUsers,\n\t\t\t\t\t\t\t...(typingUsers.find((user) => user.id === event.user.id)\n\t\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: event.user.id,\n\t\t\t\t\t\t\t\t\t\t\tname: event.user.name\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]\n\t\t\t\t\t: typingUsers.filter((user) => user.id !== event.user.id);\n\n\t\t\t\tif (typingUsersTimeout[event.user.id]) {\n\t\t\t\t\tclearTimeout(typingUsersTimeout[event.user.id]);\n\t\t\t\t}\n\n\t\t\t\ttypingUsersTimeout[event.user.id] = setTimeout(() => {\n\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst submitHandler = async ({ content, data }) => {\n\t\tif (!content && (data?.files ?? []).length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst res = await sendMessage(localStorage.token, id, { content: content, data: data }).catch(\n\t\t\t(error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t);\n\n\t\tif (res) {\n\t\t\tmessagesContainerElement.scrollTop = messagesContainerElement.scrollHeight;\n\t\t}\n\t};\n\n\tconst onChange = async () => {\n\t\t$socket?.emit('channel-events', {\n\t\t\tchannel_id: id,\n\t\t\tmessage_id: null,\n\t\t\tdata: {\n\t\t\t\ttype: 'typing',\n\t\t\t\tdata: {\n\t\t\t\t\ttyping: true\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tlet mediaQuery;\n\tlet largeScreen = false;\n\n\tonMount(() => {\n\t\tif ($chatId) {\n\t\t\tchatId.set('');\n\t\t}\n\n\t\t$socket?.on('channel-events', channelEventHandler);\n\n\t\tmediaQuery = window.matchMedia('(min-width: 1024px)');\n\n\t\tconst handleMediaQuery = async (e) => {\n\t\t\tif (e.matches) {\n\t\t\t\tlargeScreen = true;\n\t\t\t} else {\n\t\t\t\tlargeScreen = false;\n\t\t\t}\n\t\t};\n\n\t\tmediaQuery.addEventListener('change', handleMediaQuery);\n\t\thandleMediaQuery(mediaQuery);\n\t});\n\n\tonDestroy(() => {\n\t\t$socket?.off('channel-events', channelEventHandler);\n\t});\n</script>\n\n<svelte:head>\n\t<title>#{channel?.name ?? 'Channel'} | Open WebUI</title>\n</svelte:head>\n\n<div\n\tclass=\"h-screen max-h-[100dvh] transition-width duration-200 ease-in-out {$showSidebar\n\t\t? 'md:max-w-[calc(100%-260px)]'\n\t\t: ''} w-full max-w-full flex flex-col\"\n\tid=\"channel-container\"\n>\n\t<PaneGroup direction=\"horizontal\" class=\"w-full h-full\">\n\t\t<Pane defaultSize={50} minSize={50} class=\"h-full flex flex-col w-full relative\">\n\t\t\t<Navbar {channel} />\n\n\t\t\t<div class=\"flex-1 overflow-y-auto\">\n\t\t\t\t{#if channel}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\" pb-2.5 max-w-full z-10 scrollbar-hidden w-full h-full pt-6 flex-1 flex flex-col-reverse overflow-auto\"\n\t\t\t\t\t\tid=\"messages-container\"\n\t\t\t\t\t\tbind:this={messagesContainerElement}\n\t\t\t\t\t\ton:scroll={(e) => {\n\t\t\t\t\t\t\tscrollEnd = Math.abs(messagesContainerElement.scrollTop) <= 50;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#key id}\n\t\t\t\t\t\t\t<Messages\n\t\t\t\t\t\t\t\t{channel}\n\t\t\t\t\t\t\t\t{messages}\n\t\t\t\t\t\t\t\t{top}\n\t\t\t\t\t\t\t\tonThread={(id) => {\n\t\t\t\t\t\t\t\t\tthreadId = id;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonLoad={async () => {\n\t\t\t\t\t\t\t\t\tconst newMessages = await getChannelMessages(\n\t\t\t\t\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tmessages.length\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\tmessages = [...messages, ...newMessages];\n\n\t\t\t\t\t\t\t\t\tif (newMessages.length < 50) {\n\t\t\t\t\t\t\t\t\t\ttop = true;\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/key}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\" pb-[1rem]\">\n\t\t\t\t<MessageInput\n\t\t\t\t\tid=\"root\"\n\t\t\t\t\t{typingUsers}\n\t\t\t\t\t{onChange}\n\t\t\t\t\tonSubmit={submitHandler}\n\t\t\t\t\t{scrollToBottom}\n\t\t\t\t\t{scrollEnd}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Pane>\n\n\t\t{#if !largeScreen}\n\t\t\t{#if threadId !== null}\n\t\t\t\t<Drawer\n\t\t\t\t\tshow={threadId !== null}\n\t\t\t\t\ton:close={() => {\n\t\t\t\t\t\tthreadId = null;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" {threadId !== null ? ' h-screen  w-full' : 'px-6 py-4'} h-full\">\n\t\t\t\t\t\t<Thread\n\t\t\t\t\t\t\t{threadId}\n\t\t\t\t\t\t\t{channel}\n\t\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\t\tthreadId = null;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Drawer>\n\t\t\t{/if}\n\t\t{:else if threadId !== null}\n\t\t\t<PaneResizer\n\t\t\t\tclass=\"relative flex w-[3px] items-center justify-center bg-background group bg-gray-50 dark:bg-gray-850\"\n\t\t\t>\n\t\t\t\t<div class=\"z-10 flex h-7 w-5 items-center justify-center rounded-xs\">\n\t\t\t\t\t<EllipsisVertical className=\"size-4 invisible group-hover:visible\" />\n\t\t\t\t</div>\n\t\t\t</PaneResizer>\n\n\t\t\t<Pane defaultSize={50} minSize={30} class=\"h-full w-full\">\n\t\t\t\t<div class=\"h-full w-full shadow-xl\">\n\t\t\t\t\t<Thread\n\t\t\t\t\t\t{threadId}\n\t\t\t\t\t\t{channel}\n\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\tthreadId = null;\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Pane>\n\t\t{/if}\n\t</PaneGroup>\n</div>\n","<script lang=\"ts\">\n\timport { page } from '$app/stores';\n\n\timport Channel from '$lib/components/channel/Channel.svelte';\n</script>\n\n<Channel id={$page.params.id} />\n"],"names":["ctx","insert_hydration","target","a0","anchor","append_hydration","div0","div1","a1","div2","div3","set_data","t1","t1_value","t4","t4_value","hr","dirty","tooltip_changes","t5_value","_a","span3","span4","t2","t2_value","t5","if_block0","create_if_block_1","create_if_block","button0","button1","button2","div4","div5","t9","t9_value","i18n","getContext","show","$$props","role","className","dispatch","createEventDispatcher","showSettings","$$invalidate","$mobile","showSidebar","userSignOut","user","func","e","fade","state","value","svg","path0","path1","show_if","WEBUI_BASE_URL","attr","img","img_src_value","span","flyAndScale","side","align","path","strokeWidth","get_default_slot_context","svelte_virtual_list_row","get_key","i","svelte_virtual_list_viewport","svelte_virtual_list_contents","items","height","itemHeight","start","end","height_map","rows","viewport","contents","viewport_height","visible","mounted","top","bottom","average_height","refresh","scrollTop","tick","content_height","row","row_height","remaining","handle_scroll","old_start","v","y","expected_height","actual_height","d","onMount","$$value","data","ROW_HEIGHT","div","each_blocks","t","t_value","img_alt_value","button","input","code","onClose","onSubmit","name","emojis","emojiShortCodes","search","flattenedEmojis","emojiRows","selectEmoji","emoji","selectedCode","click_handler","emojiItem","acc","key","filtered","emojiGroups","group","groupEmojis","currentRow","item","create_if_block_13","create_if_block_9","if_block3","_b","create_if_block_7","div0_class_value","div2_class_value","div2_id_value","div2_dir_value","current","_c","_d","create_if_block_15","create_if_block_14","if_block","create_if_block_12","profilepreview_changes","dayjs","formatDate","create_if_block_10","t0","t0_value","fileitem_changes","image_changes","create_if_block_6","if_block1","create_if_block_3","if_block2","create_if_block_2","markdown_changes","t3","t3_value","each_value","ensure_array_like","src_url_equal","create_if_block_5","create_if_block_4","button_class_value","span0","span1","span2","relativeTime","isToday","isYesterday","localizedFormat","message","showUserProfile","thread","onDelete","onEdit","onThread","onReaction","showButtons","edit","editedContent","showDeleteConfirmDialog","func_1","click_handler_3","isCmdOrCtrlPressed","isEnterPressed","reaction","child_ctx","message_1_changes","get_if_ctx","id","channel","messages","onLoad","messagesLoading","loadMoreMessages","element","m","deleteMessage","error","toast","content","updateMessage","$user","r","removeReaction","addReaction","screenCaptureHandler","uploadFilesHandler","init","form","div7","div6","richtextinput_changes","button_disabled_value","placeholder","$i18n","transparentBackground","draggedOver","recording","files","filesInputElement","inputFiles","typingUsers","onChange","scrollEnd","scrollToBottom","mediaStream","video","canvas","track","imageUrl","inputFilesHandler","file","$config","reader","event","$settings","width","compressImage","uploadFileHandler","tempItemId","uuidv4","fileItem","uploadedFile","uploadFile","WEBUI_API_BASE_URL","handleKeyDown","onDragOver","onDragLeave","onDrop","submitHandler","chatInputElement","chatInput","dropzoneElement","onDestroy","text","filename","fileIdx","stream","err","usermenu_changes","nav","$showSidebar","showArchivedChats","threadId","typingUsersTimeout","messagesContainerElement","initHandler","getChannelThreadMessages","goto","channelEventHandler","type","idx","sendMessage","$socket","newMessages","drawer_changes","div_class_value","getChannelById","getChannelMessages","mediaQuery","largeScreen","$chatId","chatId","handleMediaQuery"],"mappings":"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","x_google_ignoreList":[5]}