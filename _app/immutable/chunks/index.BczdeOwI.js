import{c as H,r as G,g as J}from"./apiInterceptor.ovEtsaVg.js";import{d as O,r as ot}from"./relativeTime.DpbLsHUI.js";import{e as q}from"./index.Bn_1hBZy.js";let P;const it=new Uint8Array(16);function ct(){if(!P&&(P=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(it)}const A=[];for(let t=0;t<256;++t)A.push((t+256).toString(16).slice(1));function lt(t,e=0){return A[t[e+0]]+A[t[e+1]]+A[t[e+2]]+A[t[e+3]]+"-"+A[t[e+4]]+A[t[e+5]]+"-"+A[t[e+6]]+A[t[e+7]]+"-"+A[t[e+8]]+A[t[e+9]]+"-"+A[t[e+10]]+A[t[e+11]]+A[t[e+12]]+A[t[e+13]]+A[t[e+14]]+A[t[e+15]]}const ht=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Z={randomUUID:ht};function ut(t,e,r){if(Z.randomUUID&&!e&&!t)return Z.randomUUID();t=t||{};const a=t.random||(t.rng||ct)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,lt(a)}var ft={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.10.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2023
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r=typeof window=="object",a=r?window:{};a.JS_SHA256_NO_WINDOW&&(r=!1);var u=!r&&typeof self=="object",h=!a.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;h?a=H:u&&(a=self);var x=!a.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,p=!a.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",n="0123456789abcdef".split(""),E=[-2147483648,8388608,32768,128],y=[24,16,8,0],S=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],T=["hex","array","digest","arrayBuffer"],v=[];(a.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"}),p&&(a.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(s){return typeof s=="object"&&s.buffer&&s.buffer.constructor===ArrayBuffer});var Y=function(s,l){return function(f){return new w(l,!0).update(f)[s]()}},D=function(s){var l=Y("hex",s);h&&(l=I(l,s)),l.create=function(){return new w(s)},l.update=function(d){return l.create().update(d)};for(var f=0;f<T.length;++f){var c=T[f];l[c]=Y(c,s)}return l},I=function(s,l){var f=G,c=G.Buffer,d=l?"sha224":"sha256",i;c.from&&!a.JS_SHA256_NO_BUFFER_FROM?i=c.from:i=function(o){return new c(o)};var g=function(o){if(typeof o=="string")return f.createHash(d).update(o,"utf8").digest("hex");if(o==null)throw new Error(e);return o.constructor===ArrayBuffer&&(o=new Uint8Array(o)),Array.isArray(o)||ArrayBuffer.isView(o)||o.constructor===c?f.createHash(d).update(i(o)).digest("hex"):s(o)};return g},B=function(s,l){return function(f,c){return new k(f,l,!0).update(c)[s]()}},$=function(s){var l=B("hex",s);l.create=function(d){return new k(d,s)},l.update=function(d,i){return l.create(d).update(i)};for(var f=0;f<T.length;++f){var c=T[f];l[c]=B(c,s)}return l};function w(s,l){l?(v[0]=v[16]=v[1]=v[2]=v[3]=v[4]=v[5]=v[6]=v[7]=v[8]=v[9]=v[10]=v[11]=v[12]=v[13]=v[14]=v[15]=0,this.blocks=v):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=s}w.prototype.update=function(s){if(!this.finalized){var l,f=typeof s;if(f!=="string"){if(f==="object"){if(s===null)throw new Error(e);if(p&&s.constructor===ArrayBuffer)s=new Uint8Array(s);else if(!Array.isArray(s)&&(!p||!ArrayBuffer.isView(s)))throw new Error(e)}else throw new Error(e);l=!0}for(var c,d=0,i,g=s.length,o=this.blocks;d<g;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),l)for(i=this.start;d<g&&i<64;++d)o[i>>2]|=s[d]<<y[i++&3];else for(i=this.start;d<g&&i<64;++d)c=s.charCodeAt(d),c<128?o[i>>2]|=c<<y[i++&3]:c<2048?(o[i>>2]|=(192|c>>6)<<y[i++&3],o[i>>2]|=(128|c&63)<<y[i++&3]):c<55296||c>=57344?(o[i>>2]|=(224|c>>12)<<y[i++&3],o[i>>2]|=(128|c>>6&63)<<y[i++&3],o[i>>2]|=(128|c&63)<<y[i++&3]):(c=65536+((c&1023)<<10|s.charCodeAt(++d)&1023),o[i>>2]|=(240|c>>18)<<y[i++&3],o[i>>2]|=(128|c>>12&63)<<y[i++&3],o[i>>2]|=(128|c>>6&63)<<y[i++&3],o[i>>2]|=(128|c&63)<<y[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=o[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},w.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var s=this.blocks,l=this.lastByteIndex;s[16]=this.block,s[l>>2]|=E[l&3],this.block=s[16],l>=56&&(this.hashed||this.hash(),s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),s[14]=this.hBytes<<3|this.bytes>>>29,s[15]=this.bytes<<3,this.hash()}},w.prototype.hash=function(){var s=this.h0,l=this.h1,f=this.h2,c=this.h3,d=this.h4,i=this.h5,g=this.h6,o=this.h7,F=this.blocks,b,_,M,R,m,U,N,L,V,W,z;for(b=16;b<64;++b)m=F[b-15],_=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3,m=F[b-2],M=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,F[b]=F[b-16]+_+F[b-7]+M<<0;for(z=l&f,b=0;b<64;b+=4)this.first?(this.is224?(L=300032,m=F[0]-1413257819,o=m-150054599<<0,c=m+24177077<<0):(L=704751109,m=F[0]-210244248,o=m-1521486534<<0,c=m+143694565<<0),this.first=!1):(_=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),M=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),L=s&l,R=L^s&f^z,N=d&i^~d&g,m=o+M+N+S[b]+F[b],U=_+R,o=c+m<<0,c=m+U<<0),_=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),M=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),V=c&s,R=V^c&l^L,N=o&d^~o&i,m=g+M+N+S[b+1]+F[b+1],U=_+R,g=f+m<<0,f=m+U<<0,_=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),M=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),W=f&c,R=W^f&s^V,N=g&o^~g&d,m=i+M+N+S[b+2]+F[b+2],U=_+R,i=l+m<<0,l=m+U<<0,_=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),M=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),z=l&f,R=z^l&c^W,N=i&g^~i&o,m=d+M+N+S[b+3]+F[b+3],U=_+R,d=s+m<<0,s=m+U<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+s<<0,this.h1=this.h1+l<<0,this.h2=this.h2+f<<0,this.h3=this.h3+c<<0,this.h4=this.h4+d<<0,this.h5=this.h5+i<<0,this.h6=this.h6+g<<0,this.h7=this.h7+o<<0},w.prototype.hex=function(){this.finalize();var s=this.h0,l=this.h1,f=this.h2,c=this.h3,d=this.h4,i=this.h5,g=this.h6,o=this.h7,F=n[s>>28&15]+n[s>>24&15]+n[s>>20&15]+n[s>>16&15]+n[s>>12&15]+n[s>>8&15]+n[s>>4&15]+n[s&15]+n[l>>28&15]+n[l>>24&15]+n[l>>20&15]+n[l>>16&15]+n[l>>12&15]+n[l>>8&15]+n[l>>4&15]+n[l&15]+n[f>>28&15]+n[f>>24&15]+n[f>>20&15]+n[f>>16&15]+n[f>>12&15]+n[f>>8&15]+n[f>>4&15]+n[f&15]+n[c>>28&15]+n[c>>24&15]+n[c>>20&15]+n[c>>16&15]+n[c>>12&15]+n[c>>8&15]+n[c>>4&15]+n[c&15]+n[d>>28&15]+n[d>>24&15]+n[d>>20&15]+n[d>>16&15]+n[d>>12&15]+n[d>>8&15]+n[d>>4&15]+n[d&15]+n[i>>28&15]+n[i>>24&15]+n[i>>20&15]+n[i>>16&15]+n[i>>12&15]+n[i>>8&15]+n[i>>4&15]+n[i&15]+n[g>>28&15]+n[g>>24&15]+n[g>>20&15]+n[g>>16&15]+n[g>>12&15]+n[g>>8&15]+n[g>>4&15]+n[g&15];return this.is224||(F+=n[o>>28&15]+n[o>>24&15]+n[o>>20&15]+n[o>>16&15]+n[o>>12&15]+n[o>>8&15]+n[o>>4&15]+n[o&15]),F},w.prototype.toString=w.prototype.hex,w.prototype.digest=function(){this.finalize();var s=this.h0,l=this.h1,f=this.h2,c=this.h3,d=this.h4,i=this.h5,g=this.h6,o=this.h7,F=[s>>24&255,s>>16&255,s>>8&255,s&255,l>>24&255,l>>16&255,l>>8&255,l&255,f>>24&255,f>>16&255,f>>8&255,f&255,c>>24&255,c>>16&255,c>>8&255,c&255,d>>24&255,d>>16&255,d>>8&255,d&255,i>>24&255,i>>16&255,i>>8&255,i&255,g>>24&255,g>>16&255,g>>8&255,g&255];return this.is224||F.push(o>>24&255,o>>16&255,o>>8&255,o&255),F},w.prototype.array=w.prototype.digest,w.prototype.arrayBuffer=function(){this.finalize();var s=new ArrayBuffer(this.is224?28:32),l=new DataView(s);return l.setUint32(0,this.h0),l.setUint32(4,this.h1),l.setUint32(8,this.h2),l.setUint32(12,this.h3),l.setUint32(16,this.h4),l.setUint32(20,this.h5),l.setUint32(24,this.h6),this.is224||l.setUint32(28,this.h7),s};function k(s,l,f){var c,d=typeof s;if(d==="string"){var i=[],g=s.length,o=0,F;for(c=0;c<g;++c)F=s.charCodeAt(c),F<128?i[o++]=F:F<2048?(i[o++]=192|F>>6,i[o++]=128|F&63):F<55296||F>=57344?(i[o++]=224|F>>12,i[o++]=128|F>>6&63,i[o++]=128|F&63):(F=65536+((F&1023)<<10|s.charCodeAt(++c)&1023),i[o++]=240|F>>18,i[o++]=128|F>>12&63,i[o++]=128|F>>6&63,i[o++]=128|F&63);s=i}else if(d==="object"){if(s===null)throw new Error(e);if(p&&s.constructor===ArrayBuffer)s=new Uint8Array(s);else if(!Array.isArray(s)&&(!p||!ArrayBuffer.isView(s)))throw new Error(e)}else throw new Error(e);s.length>64&&(s=new w(l,!0).update(s).array());var b=[],_=[];for(c=0;c<64;++c){var M=s[c]||0;b[c]=92^M,_[c]=54^M}w.call(this,l,f),this.update(_),this.oKeyPad=b,this.inner=!0,this.sharedMemory=f}k.prototype=new w,k.prototype.finalize=function(){if(w.prototype.finalize.call(this),this.inner){this.inner=!1;var s=this.array();w.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(s),w.prototype.finalize.call(this)}};var C=D();C.sha256=C,C.sha224=D(!0),C.sha256.hmac=$(),C.sha224.hmac=$(!0),x?t.exports=C:(a.sha256=C.sha256,a.sha224=C.sha224)})()})(ft);var X={exports:{}};(function(t,e){(function(r,a){t.exports=a()})(H,function(){return function(r,a,u){a.prototype.isToday=function(){var h="YYYY-MM-DD",x=u();return this.format(h)===x.format(h)}}})})(X);var dt=X.exports;const xt=J(dt);var Q={exports:{}};(function(t,e){(function(r,a){t.exports=a()})(H,function(){return function(r,a,u){a.prototype.isYesterday=function(){var h="YYYY-MM-DD",x=u().subtract(1,"day");return this.format(h)===x.format(h)}}})})(Q);var pt=Q.exports;const gt=J(pt);var tt={exports:{}};(function(t,e){(function(r,a){t.exports=a()})(H,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,u,h){var x=u.prototype,p=x.format;h.en.formats=r,x.format=function(n){n===void 0&&(n="YYYY-MM-DDTHH:mm:ssZ");var E=this.$locale().formats,y=function(S,T){return S.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(v,Y,D){var I=D&&D.toUpperCase();return Y||T[D]||r[D]||T[I].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(B,$,w){return $||w.slice(1)})})}(n,E===void 0?{}:E);return p.call(this,y)}}})})(tt);var Ft=tt.exports;const mt=J(Ft);var j=(t=>(t.PUNCTUATION="punctuation",t.PARAGRAPHS="paragraphs",t.NONE="none",t))(j||{});O.extend(ot);O.extend(xt);O.extend(gt);O.extend(mt);const Ut=(t,e,r,a)=>{const u=[{regex:/{{char}}/gi,replacement:r},{regex:/{{user}}/gi,replacement:a},{regex:/{{VIDEO_FILE_ID_([a-f0-9-]+)}}/gi,replacement:(x,p)=>`<video src="${q}/api/v1/files/${p}/content" controls></video>`},{regex:/{{HTML_FILE_ID_([a-f0-9-]+)}}/gi,replacement:(x,p)=>`<iframe src="${q}/api/v1/files/${p}/content/html" width="100%" frameborder="0" onload="this.style.height=(this.contentWindow.document.body.scrollHeight+20)+'px';"></iframe>`}];return t=((x,p)=>x.split(/(```[\s\S]*?```|`[\s\S]*?`)/).map(n=>n.startsWith("```")||n.startsWith("`")?n:p(n)).join(""))(t,x=>(u.forEach(({regex:p,replacement:n})=>{n!=null&&(x=x.replace(p,n))}),Array.isArray(e)&&e.forEach((p,n)=>{const E=new RegExp(`\\[${n}\\]`,"g");x=x.replace(E,`<source_id data="${n}" title="${p}" />`)}),x)),t},Nt=t=>t.replace(/<\|[a-z]*$/,"").replace(/<\|[a-z]+\|$/,"").replace(/<$/,"").replaceAll(/<\|[a-z]+\|>/g," ").replaceAll("<","&lt;").replaceAll(">","&gt;").trim(),Yt=t=>t.trim();function Bt(t){return new DOMParser().parseFromString(t,"text/html").documentElement.textContent}const Ot=t=>t.charAt(0).toUpperCase()+t.slice(1),Lt=t=>{let e="";return new TransformStream({transform(r,a){e+=r;const u=e.split(t);u.slice(0,-1).forEach(h=>a.enqueue(h)),e=u[u.length-1]},flush(r){e&&r.enqueue(e)}})},$t=t=>{const e={messages:{},currentId:null};let r=null,a=null;for(const u of t)a=ut(),r!==null&&(e.messages[r].childrenIds=[...e.messages[r].childrenIds,a]),e.messages[a]={...u,id:a,parentId:r,childrenIds:[]},r=a;return e.currentId=a,e},yt=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");t.height=1,t.width=1;const r=new ImageData(t.width,t.height),a=r.data;for(let h=0;h<r.data.length;h+=1)h%4!==3?a[h]=Math.floor(256*Math.random()):a[h]=255;e.putImageData(r,0,0);const u=e.getImageData(0,0,t.width,t.height).data;for(let h=0;h<u.length;h+=1)if(u[h]!==a[h])return console.log("canvasPixelTest: Wrong canvas pixel RGB value detected:",u[h],"at:",h,"expected:",a[h]),console.log("canvasPixelTest: Canvas blocking or spoofing is likely"),!1;return!0},kt=async(t,e,r)=>new Promise((a,u)=>{const h=new Image;h.onload=()=>{const x=document.createElement("canvas");let p=h.width,n=h.height;if(e&&r){if(p<=e&&n<=r){a(t);return}p/n>e/r?(n=Math.round(e*n/p),p=e):(p=Math.round(r*p/n),n=r)}else if(e){if(p<=e){a(t);return}n=Math.round(e*n/p),p=e}else if(r){if(n<=r){a(t);return}p=Math.round(r*p/n),n=r}x.width=p,x.height=n,x.getContext("2d").drawImage(h,0,0,p,n);const y=x.toDataURL();a(y)},h.onerror=x=>u(x),h.src=t}),zt=t=>{const e=document.createElement("canvas"),r=e.getContext("2d");if(e.width=100,e.height=100,!yt())return console.log("generateInitialsImage: failed pixel test, fingerprint evasion is likely. Using default image."),"/user.png";r.fillStyle="#F39C12",r.fillRect(0,0,e.width,e.height),r.fillStyle="#FFFFFF",r.font="40px Helvetica",r.textAlign="center",r.textBaseline="middle";const a=t.trim(),u=a.length>0?a[0]+(a.split(" ").length>1?a[a.lastIndexOf(" ")+1]:""):"";return r.fillText(u.toUpperCase(),e.width/2,e.height/2),e.toDataURL()},Pt=t=>{const e=O(t);return O(),e.isToday()?`Today at ${e.format("LT")}`:e.isYesterday()?`Yesterday at ${e.format("LT")}`:`${e.format("L")} at ${e.format("LT")}`},jt=async t=>{let e=!1;if(!navigator.clipboard){const r=document.createElement("textarea");r.value=t,r.style.top="0",r.style.left="0",r.style.position="fixed",document.body.appendChild(r),r.focus(),r.select();try{const u=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+u),e=!0}catch(a){console.error("Fallback: Oops, unable to copy",a)}return document.body.removeChild(r),e}return e=await navigator.clipboard.writeText(t).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(r=>(console.error("Async: Could not copy text: ",r),!1)),e},Ht=(t,e)=>e==="0.0.0"?!1:e.localeCompare(t,void 0,{numeric:!0,sensitivity:"case",caseFirst:"upper"})<0,Vt=t=>{const e=/\[([^\]]+)\]/g,r=[];let a;for(;(a=e.exec(t))!==null;)r.push({word:a[1],startIndex:a.index,endIndex:e.lastIndex-1});return r},Wt=(t,e)=>{console.log("inputString",t);const r=t.split(`
`),u=r.pop().split(" ");(u.at(-1)===e||e===""&&u.at(-1)==="\\#")&&u.pop();let h=u.join(" ");h!==""&&(h+=" ");const x=[...r,h].join(`
`);return console.log("resultString",x),x},Jt=t=>"mapping"in t[0]?"openai":"webui",Kt=async(t=!1)=>{const e=await new Promise((u,h)=>{navigator.geolocation.getCurrentPosition(u,h)}).catch(u=>{throw console.error("Error getting user location:",u),u});if(!e)return"Location not available";const{latitude:r,longitude:a}=e.coords;return t?{latitude:r,longitude:a}:`${r.toFixed(3)}, ${a.toFixed(3)} (lat, long)`},vt=t=>{var p,n,E,y,S,T,v,Y;const e=t.mapping,r=[];let a="",u=null;for(const D in e){const I=e[D];a=D;try{if(r.length==0&&(I.message==null||((p=I.message.content.parts)==null?void 0:p[0])==""&&I.message.content.text==null))continue;{const B={id:D,parentId:u,childrenIds:I.children||[],role:((E=(n=I.message)==null?void 0:n.author)==null?void 0:E.role)!=="user"?"assistant":"user",content:((T=(S=(y=I.message)==null?void 0:y.content)==null?void 0:S.parts)==null?void 0:T[0])||((Y=(v=I.message)==null?void 0:v.content)==null?void 0:Y.text)||"",model:"gpt-3.5-turbo",done:!0,context:null};r.push(B),u=a}}catch(B){console.log("Error with",I,`
Error:`,B)}}const h={};return r.forEach(D=>h[D.id]=D),{history:{currentId:a,messages:h},models:["gpt-3.5-turbo"],messages:r,options:{},timestamp:t.create_time,title:t.title??"New Chat"}},bt=t=>{const e=t.messages;if(e.length===0||e[e.length-1].childrenIds.length!==0||e[0].parentId!==null)return!1;for(const u of e)if(typeof u.content!="string")return!1;return!0},Gt=t=>{const e=[];let r=0;for(const a of t){const u=vt(a);bt(u)?e.push({id:a.id,user_id:"",title:a.title,chat:u,timestamp:a.timestamp}):r++}return console.log(r,"Conversations could not be imported"),e},qt=t=>{let e;try{e=new URL(t)}catch{return!1}return e.protocol==="http:"||e.protocol==="https:"},wt=t=>{const e=/[\uD800-\uDBFF][\uDC00-\uDFFF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g;return t.replace(e,"")},At=t=>t.replace(/(```[\s\S]*?```)/g,"").replace(/^\|.*\|$/gm,"").replace(/(?:\*\*|__)(.*?)(?:\*\*|__)/g,"$1").replace(/(?:[*_])(.*?)(?:[*_])/g,"$1").replace(/~~(.*?)~~/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/!?\[([^\]]*)\](?:\([^)]+\)|\[[^\]]*\])/g,"$1").replace(/^\[[^\]]+\]:\s*.*$/gm,"").replace(/^#{1,6}\s+/gm,"").replace(/^\s*[-*+]\s+/gm,"").replace(/^\s*(?:\d+\.)\s+/gm,"").replace(/^\s*>[> ]*/gm,"").replace(/^\s*:\s+/gm,"").replace(/\[\^[^\]]*\]/g,"").replace(/[-*_~]/g,"").replace(/\n{2,}/g,`
`),K=t=>At(wt(t.trim())),Et=(t,e)=>{for(const r of e)t=t.replace(new RegExp(`<details\\s+type="${r}"[^>]*>.*?<\\/details>`,"gis"),"");return t},et=/```[\s\S]*?```/g,Dt=t=>{const e=[];let r=0;t=t.replace(et,u=>{const h=`\0${r}\0`;return e[r++]=u,h});let a=t.split(new RegExp("(?<=[.!?])\\s+"));return a=a.map(u=>u.replace(/\u0000(\d+)\u0000/g,(h,x)=>e[x])),a.map(K).filter(Boolean)},_t=t=>{const e=[];let r=0;t=t.replace(et,u=>{const h=`\0${r}\0`;return e[r++]=u,h});let a=t.split(/\n+/);return a=a.map(u=>u.replace(/\u0000(\d+)\u0000/g,(h,x)=>e[x])),a.map(K).filter(Boolean)},Mt=t=>Dt(t).reduce((e,r)=>{const a=e.length-1;if(a>=0){const u=e[a],h=u.split(/\s+/).length,x=u.length;h<4||x<50?e[a]=u+" "+r:e.push(r)}else e.push(r);return e},[]),Zt=(t,e="punctuation")=>{t=Et(t,["reasoning","code_interpreter"]);const r=[];switch(e){default:case j.PUNCTUATION:r.push(...Mt(t));break;case j.PARAGRAPHS:r.push(..._t(t));break;case j.NONE:r.push(K(t));break}return r},Xt=(t,e)=>new File([t],e,{type:t.type}),Qt=(t,e)=>({"{{USER_NAME}}":t,"{{USER_LOCATION}}":e||"Unknown","{{CURRENT_DATETIME}}":It(),"{{CURRENT_DATE}}":rt(),"{{CURRENT_TIME}}":st(),"{{CURRENT_WEEKDAY}}":at(),"{{CURRENT_TIMEZONE}}":nt(),"{{USER_LANGUAGE}}":localStorage.getItem("locale")||"zh-CN"}),te=(t,e,r)=>{const a=new Date,u=a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0"),h=a.toLocaleTimeString("zh-CN",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}),x=at(),p=nt(),n=localStorage.getItem("locale")||"zh-CN";return t=t.replace("{{CURRENT_DATETIME}}",`${u} ${h}`),t=t.replace("{{CURRENT_DATE}}",u),t=t.replace("{{CURRENT_TIME}}",h),t=t.replace("{{CURRENT_WEEKDAY}}",x),t=t.replace("{{CURRENT_TIMEZONE}}",p),t=t.replace("{{USER_LANGUAGE}}",n),e&&(t=t.replace("{{USER_NAME}}",e)),r?t=t.replace("{{USER_LOCATION}}",r):t=t.replace("{{USER_LOCATION}}","LOCATION_UNKNOWN"),t},ee=t=>{const e=new Date,r=new Date(t*1e3),u=(e.getTime()-r.getTime())/(1e3*3600*24),h=e.getDate(),x=e.getMonth(),p=e.getFullYear(),n=r.getDate(),E=r.getMonth(),y=r.getFullYear();return p===y&&x===E&&h===n?"Today":p===y&&x===E&&h-n===1?"Yesterday":u<=7?"Previous 7 days":u<=30?"Previous 30 days":p===y?r.toLocaleString("default",{month:"long"}):r.getFullYear().toString()},re=t=>{const e={};let r=!1,a=!1;const u=/^\s*([a-z_]+):\s*(.*)\s*$/i,h=t.split(`
`);if(h[0].trim()!=='"""')return{};r=!0;for(let x=1;x<h.length;x++){const p=h[x];if(p.includes('"""')&&r){a=!0;break}if(r&&!a){const n=u.exec(p);if(n){const[,E,y]=n;e[E.trim()]=y.trim()}}}return e},se=(t,e,r)=>{const a=t.map(h=>h.code);return e.map(h=>a.find(x=>x.startsWith(h))).find(Boolean)||r},rt=()=>{const t=new Date,e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${a}`},st=()=>new Date().toTimeString().split(" ")[0],It=()=>`${rt()} ${st()}`,nt=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,at=()=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()],Tt=(t,e)=>{if(e===null)return[];const r=t.messages[e];return r!=null&&r.parentId?[...Tt(t,r.parentId),r]:[r]},ne=t=>{if(t==null)return"Unknown size";if(typeof t!="number"||t<0)return"Invalid size";if(t===0)return"0 B";const e=["B","KB","MB","GB","TB"];let r=0;for(;t>=1024&&r<e.length-1;)t/=1024,r++;return`${t.toFixed(1)} ${e[r]}`},ae=t=>(console.log(typeof t),t?t.split(`
`).length:0);export{rt as A,st as B,It as C,nt as D,at as E,Wt as F,qt as G,Vt as H,te as I,Et as J,Qt as K,Bt as L,Ut as M,Yt as N,j as T,Kt as a,Tt as b,Ht as c,$t as d,re as e,Ot as f,ee as g,ne as h,ae as i,jt as j,Nt as k,mt as l,zt as m,Xt as n,se as o,xt as p,gt as q,Pt as r,Lt as s,kt as t,lt as u,ut as v,Zt as w,yt as x,Jt as y,Gt as z};
//# sourceMappingURL=index.BczdeOwI.js.map
