{"version":3,"file":"index.ClIb_-Ri.js","sources":["../../../../../../src/lib/apis/prompts/index.ts"],"sourcesContent":["import { WEBUI_API_BASE_URL } from '$lib/constants';\nimport { apiFetch } from '$lib/apis/interceptor/apiInterceptor';\n\ntype PromptItem = {\n\tcommand: string;\n\ttitle: string;\n\tcontent: string;\n\taccess_control?: null | object;\n};\n\nexport const createNewPrompt = async (token: string, prompt: PromptItem) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/prompts/create`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\t...prompt,\n\t\t\tcommand: `/${prompt.command}`\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getPrompts = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/prompts/`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getPromptList = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/prompts/list`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getPromptByCommand = async (token: string, command: string) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/prompts/command/${command}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const updatePromptByCommand = async (token: string, prompt: PromptItem) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/prompts/command/${prompt.command}/update`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\t...prompt,\n\t\t\tcommand: `/${prompt.command}`\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const deletePromptByCommand = async (token: string, command: string) => {\n\tlet error = null;\n\n\tcommand = command.charAt(0) === '/' ? command.slice(1) : command;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/prompts/command/${command}/delete`, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n"],"names":["createNewPrompt","token","prompt","error","res","apiFetch","WEBUI_API_BASE_URL","err","getPrompts","json","getPromptList","getPromptByCommand","command","updatePromptByCommand","deletePromptByCommand"],"mappings":"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"}