{"version":3,"file":"index.BOIe7-xt.js","sources":["../../../../../../src/lib/apis/knowledge/index.ts"],"sourcesContent":["import { WEBUI_API_BASE_URL } from '$lib/constants';\nimport { apiFetch } from '$lib/apis/interceptor/apiInterceptor';\n\nexport const createNewKnowledge = async (\n\ttoken: string,\n\tname: string,\n\tdescription: string,\n\taccessControl: null | object\n) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/knowledge/create`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tname: name,\n\t\t\tdescription: description,\n\t\t\taccess_control: accessControl\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getKnowledgeBases = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/knowledge/`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getKnowledgeBaseList = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/knowledge/list`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getKnowledgeById = async (token: string, id: string) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/knowledge/${id}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\ntype KnowledgeUpdateForm = {\n\tname?: string;\n\tdescription?: string;\n\tdata?: object;\n\taccess_control?: null | object;\n};\n\nexport const updateKnowledgeById = async (token: string, id: string, form: KnowledgeUpdateForm) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/knowledge/${id}/update`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tname: form?.name ? form.name : undefined,\n\t\t\tdescription: form?.description ? form.description : undefined,\n\t\t\tdata: form?.data ? form.data : undefined,\n\t\t\taccess_control: form.access_control\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const addFileToKnowledgeById = async (token: string, id: string, fileId: string) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/knowledge/${id}/file/add`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tfile_id: fileId\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const updateFileFromKnowledgeById = async (token: string, id: string, fileId: string) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/knowledge/${id}/file/update`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tfile_id: fileId\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const removeFileFromKnowledgeById = async (token: string, id: string, fileId: string) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/knowledge/${id}/file/remove`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tfile_id: fileId\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const resetKnowledgeById = async (token: string, id: string) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/knowledge/${id}/reset`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const deleteKnowledgeById = async (token: string, id: string) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${WEBUI_API_BASE_URL}/knowledge/${id}/delete`, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n"],"names":["createNewKnowledge","token","name","description","accessControl","error","res","apiFetch","WEBUI_API_BASE_URL","err","getKnowledgeBases","json","getKnowledgeBaseList","getKnowledgeById","id","updateKnowledgeById","form","addFileToKnowledgeById","fileId","updateFileFromKnowledgeById","removeFileFromKnowledgeById","resetKnowledgeById","deleteKnowledgeById"],"mappings":"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"}