{"version":3,"file":"index.CxblQe6a.js","sources":["../../../../../../src/lib/apis/audio/index.ts"],"sourcesContent":["import { AUDIO_API_BASE_URL } from '$lib/constants';\nimport { apiFetch } from '$lib/apis/interceptor/apiInterceptor';\n\nexport const getAudioConfig = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${AUDIO_API_BASE_URL}/config`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\ntype OpenAIConfigForm = {\n\turl: string;\n\tkey: string;\n\tmodel: string;\n\tspeaker: string;\n};\n\nexport const updateAudioConfig = async (token: string, payload: OpenAIConfigForm) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${AUDIO_API_BASE_URL}/config/update`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\t...payload\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const transcribeAudio = async (token: string, file: File) => {\n\tconst data = new FormData();\n\tdata.append('file', file);\n\n\tlet error = null;\n\tconst res = await apiFetch(`${AUDIO_API_BASE_URL}/transcriptions`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: data\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.log(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const synthesizeOpenAISpeech = async (\n\ttoken: string = '',\n\tspeaker: string = 'alloy',\n\ttext: string = '',\n\tmodel?: string\n) => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${AUDIO_API_BASE_URL}/speech`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tinput: text,\n\t\t\tvoice: speaker,\n\t\t\t...(model && { model })\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.log(err);\n\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\ninterface AvailableModelsResponse {\n\tmodels: { name: string; id: string }[] | { id: string }[];\n}\n\nexport const getModels = async (token: string = ''): Promise<AvailableModelsResponse> => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${AUDIO_API_BASE_URL}/models`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.log(err);\n\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getVoices = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await apiFetch(`${AUDIO_API_BASE_URL}/voices`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.log(err);\n\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n"],"names":["getAudioConfig","token","error","res","apiFetch","AUDIO_API_BASE_URL","err","updateAudioConfig","payload","transcribeAudio","file","data","synthesizeOpenAISpeech","speaker","text","model","getModels","getVoices"],"mappings":"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"}